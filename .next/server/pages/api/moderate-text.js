"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/moderate-text";
exports.ids = ["pages/api/moderate-text"];
exports.modules = {

/***/ "(api-node)/./lib/contentModerator.ts":
/*!*********************************!*\
  !*** ./lib/contentModerator.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   contentModerator: () => (/* binding */ contentModerator)\n/* harmony export */ });\n// lib/contentModerator.ts\n// AI-powered content moderation service for text, images, and videos\nclass ContentModerator {\n    /**\n   * Moderate text content using AI\n   */ async moderateText(text, options = {\n        checkProfanity: true,\n        checkSpam: true,\n        checkIllegalContent: true,\n        checkPersonalInfo: true\n    }) {\n        try {\n            // Simple pattern-based checks first (fast)\n            const quickCheck = this.quickTextCheck(text);\n            if (!quickCheck.approved && quickCheck.confidence > 0.8) {\n                return quickCheck;\n            }\n            // AI-powered deep analysis for complex cases\n            if (this.OPENAI_API_KEY) {\n                return await this.aiModerateText(text, options);\n            }\n            return quickCheck;\n        } catch (error) {\n            console.error('Text moderation error:', error);\n            return {\n                approved: false,\n                confidence: 0.5,\n                reasons: [\n                    'Moderation service temporarily unavailable'\n                ],\n                category: 'safe',\n                suggestedAction: 'review'\n            };\n        }\n    }\n    /**\n   * Moderate image content\n   */ async moderateImage(imageBuffer, fileName, options = {\n        checkNudity: true,\n        checkViolence: true,\n        checkIllegalItems: true,\n        checkSpam: true,\n        maxFileSizeMB: 10\n    }) {\n        try {\n            // File size check\n            const sizeCheck = this.checkFileSize(imageBuffer, options.maxFileSizeMB);\n            if (!sizeCheck.approved) return sizeCheck;\n            // File type validation\n            const typeCheck = this.validateImageType(fileName);\n            if (!typeCheck.approved) return typeCheck;\n            // AI-powered image analysis\n            if (this.OPENAI_API_KEY && typeof imageBuffer !== 'string') {\n                return await this.aiModerateImage(imageBuffer, options);\n            }\n            // Fallback to basic approval for file uploads\n            return {\n                approved: true,\n                confidence: 0.7,\n                reasons: [\n                    'Basic validation passed'\n                ],\n                category: 'safe',\n                suggestedAction: 'approve'\n            };\n        } catch (error) {\n            console.error('Image moderation error:', error);\n            return {\n                approved: false,\n                confidence: 0.5,\n                reasons: [\n                    'Image analysis failed'\n                ],\n                category: 'safe',\n                suggestedAction: 'review'\n            };\n        }\n    }\n    /**\n   * Moderate video content\n   */ async moderateVideo(videoBuffer, fileName, options = {\n        checkNudity: true,\n        checkViolence: true,\n        checkIllegalItems: true,\n        checkSpam: true,\n        maxFileSizeMB: 50\n    }) {\n        try {\n            // File size check\n            const sizeCheck = this.checkFileSize(videoBuffer, options.maxFileSizeMB);\n            if (!sizeCheck.approved) return sizeCheck;\n            // File type validation\n            const typeCheck = this.validateVideoType(fileName);\n            if (!typeCheck.approved) return typeCheck;\n            // For now, basic approval - can be enhanced with video AI later\n            return {\n                approved: true,\n                confidence: 0.6,\n                reasons: [\n                    'Basic video validation passed'\n                ],\n                category: 'safe',\n                suggestedAction: 'approve'\n            };\n        } catch (error) {\n            console.error('Video moderation error:', error);\n            return {\n                approved: false,\n                confidence: 0.5,\n                reasons: [\n                    'Video analysis failed'\n                ],\n                category: 'safe',\n                suggestedAction: 'review'\n            };\n        }\n    }\n    /**\n   * Quick pattern-based text checking\n   */ quickTextCheck(text) {\n        const lowerText = text.toLowerCase();\n        const issues = [];\n        // Check for obvious profanity/inappropriate content\n        const profanityPatterns = [\n            /f[*u]ck/gi,\n            /sh[*i]t/gi,\n            /b[*i]tch/gi,\n            /d[*a]mn/gi,\n            /ass(hole)?/gi,\n            /crap/gi\n        ];\n        const inappropriatePatterns = [\n            /\\bviolence\\b/gi,\n            /\\bviolent\\b/gi,\n            /\\bhate\\b/gi,\n            /\\bhating\\b/gi,\n            /\\bhurt\\s+(someone|people|others)/gi,\n            /\\battack\\b/gi,\n            /\\bkill\\b/gi,\n            /\\bmurder\\b/gi,\n            /\\bweapon\\b/gi,\n            /\\bgun\\b/gi,\n            /\\bsex\\b/gi,\n            /\\bporn\\b/gi,\n            /\\bnude\\b/gi,\n            /\\bnaked\\b/gi,\n            /\\bdrug\\b/gi,\n            /\\bweed\\b/gi,\n            /\\bcocaine\\b/gi,\n            /\\bmeth\\b/gi,\n            /\\bsuicide\\b/gi,\n            /\\bself[- ]?harm\\b/gi\n        ];\n        // Check for personal information\n        const personalInfoPatterns = [\n            /\\d{3}-\\d{2}-\\d{4}/g,\n            /\\d{4}[- ]?\\d{4}[- ]?\\d{4}[- ]?\\d{4}/g,\n            /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g // Email (in inappropriate context)\n        ];\n        // Check for spam patterns\n        const spamPatterns = [\n            /click here/gi,\n            /free money/gi,\n            /get rich quick/gi,\n            /act now/gi,\n            /limited time/gi,\n            /guarantee/gi\n        ];\n        let severity = 0;\n        // Profanity check\n        profanityPatterns.forEach((pattern)=>{\n            if (pattern.test(lowerText)) {\n                issues.push('Contains inappropriate language');\n                severity += 0.3;\n            }\n        });\n        // Inappropriate content check\n        inappropriatePatterns.forEach((pattern)=>{\n            if (pattern.test(lowerText)) {\n                issues.push('Contains potentially inappropriate content');\n                severity += 0.4;\n            }\n        });\n        // Personal info check\n        personalInfoPatterns.forEach((pattern)=>{\n            if (pattern.test(text)) {\n                issues.push('Contains personal information');\n                severity += 0.6;\n            }\n        });\n        // Spam check\n        spamPatterns.forEach((pattern)=>{\n            if (pattern.test(lowerText)) {\n                issues.push('Contains spam-like content');\n                severity += 0.2;\n            }\n        });\n        const approved = severity < 0.5;\n        const confidence = Math.min(0.9, Math.max(0.1, 1 - severity));\n        return {\n            approved,\n            confidence,\n            reasons: issues.length > 0 ? issues : [\n                'Content appears appropriate'\n            ],\n            category: severity > 0.7 ? 'illegal' : severity > 0.5 ? 'inappropriate' : severity > 0.3 ? 'spam' : 'safe',\n            suggestedAction: severity > 0.7 ? 'reject' : severity > 0.5 ? 'flag' : severity > 0.3 ? 'review' : 'approve'\n        };\n    }\n    /**\n   * AI-powered text moderation using OpenAI\n   */ async aiModerateText(text, options) {\n        try {\n            const response = await fetch('https://api.openai.com/v1/moderations', {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${this.OPENAI_API_KEY}`,\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    input: text,\n                    model: 'omni-moderation-latest'\n                })\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                console.error('OpenAI Moderation API error:', response.status, errorText);\n                // Fail-open: If rate limited (429) or service error (5xx), allow content through\n                if (response.status === 429 || response.status >= 500) {\n                    console.warn('⚠️ Moderation temporarily unavailable (rate limit or service error) - allowing content (fail-open)');\n                    return {\n                        approved: true,\n                        confidence: 0.0,\n                        reasons: [\n                            'Moderation service temporarily unavailable - content allowed'\n                        ],\n                        category: 'safe',\n                        suggestedAction: 'approve'\n                    };\n                }\n                throw new Error(`OpenAI API returned ${response.status}: ${errorText}`);\n            }\n            const data = await response.json();\n            // Log the response for debugging\n            console.log('OpenAI Moderation API response:', JSON.stringify(data));\n            if (!data.results || !data.results[0]) {\n                console.error('Unexpected OpenAI API response format:', data);\n                throw new Error('Invalid response format from OpenAI API');\n            }\n            const result = data.results[0];\n            const issues = [];\n            let category = 'safe';\n            if (result.flagged) {\n                if (result.categories.sexual) {\n                    issues.push('Sexual content detected');\n                    category = 'inappropriate';\n                }\n                if (result.categories.hate) {\n                    issues.push('Hate speech detected');\n                    category = 'inappropriate';\n                }\n                if (result.categories.violence) {\n                    issues.push('Violent content detected');\n                    category = 'inappropriate';\n                }\n                if (result.categories['self-harm']) {\n                    issues.push('Self-harm content detected');\n                    category = 'harmful';\n                }\n                if (result.categories.illegal) {\n                    issues.push('Illegal content detected');\n                    category = 'illegal';\n                }\n            }\n            return {\n                approved: !result.flagged,\n                confidence: 0.95,\n                reasons: issues.length > 0 ? issues : [\n                    'Content approved by AI moderation'\n                ],\n                category,\n                suggestedAction: result.flagged ? 'reject' : 'approve'\n            };\n        } catch (error) {\n            console.error('AI text moderation error:', error);\n            // Fallback to quick check instead of returning the error\n            return this.quickTextCheck(text);\n        }\n    }\n    /**\n   * AI-powered image moderation\n   */ async aiModerateImage(imageBuffer, options) {\n        try {\n            // Convert buffer to base64\n            const base64Image = imageBuffer.toString('base64');\n            const response = await fetch('https://api.openai.com/v1/chat/completions', {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${this.OPENAI_API_KEY}`,\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    model: 'gpt-4-vision-preview',\n                    messages: [\n                        {\n                            role: 'system',\n                            content: 'You are a content moderator. Analyze this image and determine if it contains inappropriate content like nudity, violence, illegal items, or spam. Respond with a JSON object containing: approved (boolean), reasons (array of strings), category (safe/inappropriate/illegal/spam).'\n                        },\n                        {\n                            role: 'user',\n                            content: [\n                                {\n                                    type: 'text',\n                                    text: 'Please moderate this image for community safety.'\n                                },\n                                {\n                                    type: 'image_url',\n                                    image_url: {\n                                        url: `data:image/jpeg;base64,${base64Image}`\n                                    }\n                                }\n                            ]\n                        }\n                    ],\n                    max_tokens: 300\n                })\n            });\n            const data = await response.json();\n            const aiResponse = JSON.parse(data.choices[0].message.content);\n            return {\n                approved: aiResponse.approved,\n                confidence: 0.9,\n                reasons: aiResponse.reasons || [\n                    'AI analysis completed'\n                ],\n                category: aiResponse.category || 'safe',\n                suggestedAction: aiResponse.approved ? 'approve' : 'reject'\n            };\n        } catch (error) {\n            console.error('AI image moderation error:', error);\n            return {\n                approved: true,\n                confidence: 0.5,\n                reasons: [\n                    'AI moderation unavailable, manual review recommended'\n                ],\n                category: 'safe',\n                suggestedAction: 'review'\n            };\n        }\n    }\n    /**\n   * Validate file size\n   */ checkFileSize(buffer, maxSizeMB) {\n        const size = typeof buffer === 'string' ? buffer.length : buffer.length;\n        const maxBytes = maxSizeMB * 1024 * 1024;\n        if (size > maxBytes) {\n            return {\n                approved: false,\n                confidence: 1.0,\n                reasons: [\n                    `File size (${(size / 1024 / 1024).toFixed(1)}MB) exceeds limit (${maxSizeMB}MB)`\n                ],\n                category: 'spam',\n                suggestedAction: 'reject'\n            };\n        }\n        return {\n            approved: true,\n            confidence: 1.0,\n            reasons: [\n                'File size acceptable'\n            ],\n            category: 'safe',\n            suggestedAction: 'approve'\n        };\n    }\n    /**\n   * Validate image file type\n   */ validateImageType(fileName) {\n        const allowedTypes = [\n            '.jpg',\n            '.jpeg',\n            '.png',\n            '.gif',\n            '.webp'\n        ];\n        const extension = fileName.toLowerCase().substring(fileName.lastIndexOf('.'));\n        if (!allowedTypes.includes(extension)) {\n            return {\n                approved: false,\n                confidence: 1.0,\n                reasons: [\n                    `File type ${extension} not allowed. Allowed: ${allowedTypes.join(', ')}`\n                ],\n                category: 'inappropriate',\n                suggestedAction: 'reject'\n            };\n        }\n        return {\n            approved: true,\n            confidence: 1.0,\n            reasons: [\n                'Image file type valid'\n            ],\n            category: 'safe',\n            suggestedAction: 'approve'\n        };\n    }\n    /**\n   * Validate video file type\n   */ validateVideoType(fileName) {\n        const allowedTypes = [\n            '.mp4',\n            '.webm',\n            '.mov',\n            '.avi'\n        ];\n        const extension = fileName.toLowerCase().substring(fileName.lastIndexOf('.'));\n        if (!allowedTypes.includes(extension)) {\n            return {\n                approved: false,\n                confidence: 1.0,\n                reasons: [\n                    `Video type ${extension} not allowed. Allowed: ${allowedTypes.join(', ')}`\n                ],\n                category: 'inappropriate',\n                suggestedAction: 'reject'\n            };\n        }\n        return {\n            approved: true,\n            confidence: 1.0,\n            reasons: [\n                'Video file type valid'\n            ],\n            category: 'safe',\n            suggestedAction: 'approve'\n        };\n    }\n    constructor(){\n        this.OPENAI_API_KEY = process.env.OPENAI_API_KEY;\n        this.CONTENT_POLICY = {\n            // Define what's not allowed\n            prohibited: [\n                'explicit sexual content',\n                'violence or threats',\n                'illegal drugs or weapons',\n                'hate speech',\n                'personal information (SSN, credit cards)',\n                'spam or promotional content',\n                'scams or fraudulent offers',\n                'inappropriate images of minors'\n            ],\n            // Define what's encouraged\n            encouraged: [\n                'community assistance',\n                'respectful communication',\n                'legitimate help requests',\n                'appropriate documentation'\n            ]\n        };\n    }\n}\nconst contentModerator = new ContentModerator();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnVGLFFBQVFDLEdBQUcsQ0FBQ3hGLGNBQWM7YUFDM0N5RixpQkFBaUI7WUFDaEMsNEJBQTRCO1lBQzVCQyxZQUFZO2dCQUNWO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2FBQ0Q7WUFDRCwyQkFBMkI7WUFDM0JDLFlBQVk7Z0JBQ1Y7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7YUFDRDtRQUNIOztBQXViRjtBQUVPLE1BQU1DLG1CQUFtQixJQUFJeEcsbUJBQW1CIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2xpYi9jb250ZW50TW9kZXJhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9jb250ZW50TW9kZXJhdG9yLnRzXG4vLyBBSS1wb3dlcmVkIGNvbnRlbnQgbW9kZXJhdGlvbiBzZXJ2aWNlIGZvciB0ZXh0LCBpbWFnZXMsIGFuZCB2aWRlb3NcblxuZXhwb3J0IGludGVyZmFjZSBNb2RlcmF0aW9uUmVzdWx0IHtcbiAgYXBwcm92ZWQ6IGJvb2xlYW47XG4gIGNvbmZpZGVuY2U6IG51bWJlcjtcbiAgcmVhc29uczogc3RyaW5nW107XG4gIGNhdGVnb3J5OiAnc2FmZScgfCAnaW5hcHByb3ByaWF0ZScgfCAnaWxsZWdhbCcgfCAnc3BhbScgfCAnaGFybWZ1bCc7XG4gIHN1Z2dlc3RlZEFjdGlvbjogJ2FwcHJvdmUnIHwgJ3JldmlldycgfCAncmVqZWN0JyB8ICdmbGFnJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0TW9kZXJhdGlvbk9wdGlvbnMge1xuICBjaGVja1Byb2Zhbml0eTogYm9vbGVhbjtcbiAgY2hlY2tTcGFtOiBib29sZWFuO1xuICBjaGVja0lsbGVnYWxDb250ZW50OiBib29sZWFuO1xuICBjaGVja1BlcnNvbmFsSW5mbzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZWRpYU1vZGVyYXRpb25PcHRpb25zIHtcbiAgY2hlY2tOdWRpdHk6IGJvb2xlYW47XG4gIGNoZWNrVmlvbGVuY2U6IGJvb2xlYW47XG4gIGNoZWNrSWxsZWdhbEl0ZW1zOiBib29sZWFuO1xuICBjaGVja1NwYW06IGJvb2xlYW47XG4gIG1heEZpbGVTaXplTUI6IG51bWJlcjtcbn1cblxuY2xhc3MgQ29udGVudE1vZGVyYXRvciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgT1BFTkFJX0FQSV9LRVkgPSBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWTtcbiAgcHJpdmF0ZSByZWFkb25seSBDT05URU5UX1BPTElDWSA9IHtcbiAgICAvLyBEZWZpbmUgd2hhdCdzIG5vdCBhbGxvd2VkXG4gICAgcHJvaGliaXRlZDogW1xuICAgICAgJ2V4cGxpY2l0IHNleHVhbCBjb250ZW50JyxcbiAgICAgICd2aW9sZW5jZSBvciB0aHJlYXRzJyxcbiAgICAgICdpbGxlZ2FsIGRydWdzIG9yIHdlYXBvbnMnLFxuICAgICAgJ2hhdGUgc3BlZWNoJyxcbiAgICAgICdwZXJzb25hbCBpbmZvcm1hdGlvbiAoU1NOLCBjcmVkaXQgY2FyZHMpJyxcbiAgICAgICdzcGFtIG9yIHByb21vdGlvbmFsIGNvbnRlbnQnLFxuICAgICAgJ3NjYW1zIG9yIGZyYXVkdWxlbnQgb2ZmZXJzJyxcbiAgICAgICdpbmFwcHJvcHJpYXRlIGltYWdlcyBvZiBtaW5vcnMnXG4gICAgXSxcbiAgICAvLyBEZWZpbmUgd2hhdCdzIGVuY291cmFnZWRcbiAgICBlbmNvdXJhZ2VkOiBbXG4gICAgICAnY29tbXVuaXR5IGFzc2lzdGFuY2UnLFxuICAgICAgJ3Jlc3BlY3RmdWwgY29tbXVuaWNhdGlvbicsXG4gICAgICAnbGVnaXRpbWF0ZSBoZWxwIHJlcXVlc3RzJyxcbiAgICAgICdhcHByb3ByaWF0ZSBkb2N1bWVudGF0aW9uJ1xuICAgIF1cbiAgfTtcblxuICAvKipcbiAgICogTW9kZXJhdGUgdGV4dCBjb250ZW50IHVzaW5nIEFJXG4gICAqL1xuICBhc3luYyBtb2RlcmF0ZVRleHQoXG4gICAgdGV4dDogc3RyaW5nLCBcbiAgICBvcHRpb25zOiBUZXh0TW9kZXJhdGlvbk9wdGlvbnMgPSB7XG4gICAgICBjaGVja1Byb2Zhbml0eTogdHJ1ZSxcbiAgICAgIGNoZWNrU3BhbTogdHJ1ZSxcbiAgICAgIGNoZWNrSWxsZWdhbENvbnRlbnQ6IHRydWUsXG4gICAgICBjaGVja1BlcnNvbmFsSW5mbzogdHJ1ZVxuICAgIH1cbiAgKTogUHJvbWlzZTxNb2RlcmF0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFNpbXBsZSBwYXR0ZXJuLWJhc2VkIGNoZWNrcyBmaXJzdCAoZmFzdClcbiAgICAgIGNvbnN0IHF1aWNrQ2hlY2sgPSB0aGlzLnF1aWNrVGV4dENoZWNrKHRleHQpO1xuICAgICAgaWYgKCFxdWlja0NoZWNrLmFwcHJvdmVkICYmIHF1aWNrQ2hlY2suY29uZmlkZW5jZSA+IDAuOCkge1xuICAgICAgICByZXR1cm4gcXVpY2tDaGVjaztcbiAgICAgIH1cblxuICAgICAgLy8gQUktcG93ZXJlZCBkZWVwIGFuYWx5c2lzIGZvciBjb21wbGV4IGNhc2VzXG4gICAgICBpZiAodGhpcy5PUEVOQUlfQVBJX0tFWSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5haU1vZGVyYXRlVGV4dCh0ZXh0LCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHF1aWNrQ2hlY2s7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RleHQgbW9kZXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhcHByb3ZlZDogZmFsc2UsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNSxcbiAgICAgICAgcmVhc29uczogWydNb2RlcmF0aW9uIHNlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUnXSxcbiAgICAgICAgY2F0ZWdvcnk6ICdzYWZlJyxcbiAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAncmV2aWV3J1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTW9kZXJhdGUgaW1hZ2UgY29udGVudFxuICAgKi9cbiAgYXN5bmMgbW9kZXJhdGVJbWFnZShcbiAgICBpbWFnZUJ1ZmZlcjogQnVmZmVyIHwgc3RyaW5nLCBcbiAgICBmaWxlTmFtZTogc3RyaW5nLFxuICAgIG9wdGlvbnM6IE1lZGlhTW9kZXJhdGlvbk9wdGlvbnMgPSB7XG4gICAgICBjaGVja051ZGl0eTogdHJ1ZSxcbiAgICAgIGNoZWNrVmlvbGVuY2U6IHRydWUsXG4gICAgICBjaGVja0lsbGVnYWxJdGVtczogdHJ1ZSxcbiAgICAgIGNoZWNrU3BhbTogdHJ1ZSxcbiAgICAgIG1heEZpbGVTaXplTUI6IDEwXG4gICAgfVxuICApOiBQcm9taXNlPE1vZGVyYXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRmlsZSBzaXplIGNoZWNrXG4gICAgICBjb25zdCBzaXplQ2hlY2sgPSB0aGlzLmNoZWNrRmlsZVNpemUoaW1hZ2VCdWZmZXIsIG9wdGlvbnMubWF4RmlsZVNpemVNQik7XG4gICAgICBpZiAoIXNpemVDaGVjay5hcHByb3ZlZCkgcmV0dXJuIHNpemVDaGVjaztcblxuICAgICAgLy8gRmlsZSB0eXBlIHZhbGlkYXRpb25cbiAgICAgIGNvbnN0IHR5cGVDaGVjayA9IHRoaXMudmFsaWRhdGVJbWFnZVR5cGUoZmlsZU5hbWUpO1xuICAgICAgaWYgKCF0eXBlQ2hlY2suYXBwcm92ZWQpIHJldHVybiB0eXBlQ2hlY2s7XG5cbiAgICAgIC8vIEFJLXBvd2VyZWQgaW1hZ2UgYW5hbHlzaXNcbiAgICAgIGlmICh0aGlzLk9QRU5BSV9BUElfS0VZICYmIHR5cGVvZiBpbWFnZUJ1ZmZlciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYWlNb2RlcmF0ZUltYWdlKGltYWdlQnVmZmVyLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLy8gRmFsbGJhY2sgdG8gYmFzaWMgYXBwcm92YWwgZm9yIGZpbGUgdXBsb2Fkc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNyxcbiAgICAgICAgcmVhc29uczogWydCYXNpYyB2YWxpZGF0aW9uIHBhc3NlZCddLFxuICAgICAgICBjYXRlZ29yeTogJ3NhZmUnLFxuICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdhcHByb3ZlJ1xuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignSW1hZ2UgbW9kZXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhcHByb3ZlZDogZmFsc2UsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNSxcbiAgICAgICAgcmVhc29uczogWydJbWFnZSBhbmFseXNpcyBmYWlsZWQnXSxcbiAgICAgICAgY2F0ZWdvcnk6ICdzYWZlJyxcbiAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAncmV2aWV3J1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTW9kZXJhdGUgdmlkZW8gY29udGVudFxuICAgKi9cbiAgYXN5bmMgbW9kZXJhdGVWaWRlbyhcbiAgICB2aWRlb0J1ZmZlcjogQnVmZmVyLCBcbiAgICBmaWxlTmFtZTogc3RyaW5nLFxuICAgIG9wdGlvbnM6IE1lZGlhTW9kZXJhdGlvbk9wdGlvbnMgPSB7XG4gICAgICBjaGVja051ZGl0eTogdHJ1ZSxcbiAgICAgIGNoZWNrVmlvbGVuY2U6IHRydWUsXG4gICAgICBjaGVja0lsbGVnYWxJdGVtczogdHJ1ZSxcbiAgICAgIGNoZWNrU3BhbTogdHJ1ZSxcbiAgICAgIG1heEZpbGVTaXplTUI6IDUwXG4gICAgfVxuICApOiBQcm9taXNlPE1vZGVyYXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRmlsZSBzaXplIGNoZWNrXG4gICAgICBjb25zdCBzaXplQ2hlY2sgPSB0aGlzLmNoZWNrRmlsZVNpemUodmlkZW9CdWZmZXIsIG9wdGlvbnMubWF4RmlsZVNpemVNQik7XG4gICAgICBpZiAoIXNpemVDaGVjay5hcHByb3ZlZCkgcmV0dXJuIHNpemVDaGVjaztcblxuICAgICAgLy8gRmlsZSB0eXBlIHZhbGlkYXRpb25cbiAgICAgIGNvbnN0IHR5cGVDaGVjayA9IHRoaXMudmFsaWRhdGVWaWRlb1R5cGUoZmlsZU5hbWUpO1xuICAgICAgaWYgKCF0eXBlQ2hlY2suYXBwcm92ZWQpIHJldHVybiB0eXBlQ2hlY2s7XG5cbiAgICAgIC8vIEZvciBub3csIGJhc2ljIGFwcHJvdmFsIC0gY2FuIGJlIGVuaGFuY2VkIHdpdGggdmlkZW8gQUkgbGF0ZXJcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFwcHJvdmVkOiB0cnVlLFxuICAgICAgICBjb25maWRlbmNlOiAwLjYsXG4gICAgICAgIHJlYXNvbnM6IFsnQmFzaWMgdmlkZW8gdmFsaWRhdGlvbiBwYXNzZWQnXSxcbiAgICAgICAgY2F0ZWdvcnk6ICdzYWZlJyxcbiAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAnYXBwcm92ZSdcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZpZGVvIG1vZGVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICBjb25maWRlbmNlOiAwLjUsXG4gICAgICAgIHJlYXNvbnM6IFsnVmlkZW8gYW5hbHlzaXMgZmFpbGVkJ10sXG4gICAgICAgIGNhdGVnb3J5OiAnc2FmZScsXG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ3JldmlldydcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFF1aWNrIHBhdHRlcm4tYmFzZWQgdGV4dCBjaGVja2luZ1xuICAgKi9cbiAgcHJpdmF0ZSBxdWlja1RleHRDaGVjayh0ZXh0OiBzdHJpbmcpOiBNb2RlcmF0aW9uUmVzdWx0IHtcbiAgICBjb25zdCBsb3dlclRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgZm9yIG9idmlvdXMgcHJvZmFuaXR5L2luYXBwcm9wcmlhdGUgY29udGVudFxuICAgIGNvbnN0IHByb2Zhbml0eVBhdHRlcm5zID0gW1xuICAgICAgL2ZbKnVdY2svZ2ksIC9zaFsqaV10L2dpLCAvYlsqaV10Y2gvZ2ksIC9kWyphXW1uL2dpLFxuICAgICAgL2Fzcyhob2xlKT8vZ2ksIC9jcmFwL2dpXG4gICAgXTtcbiAgICBcbiAgICBjb25zdCBpbmFwcHJvcHJpYXRlUGF0dGVybnMgPSBbXG4gICAgICAvXFxidmlvbGVuY2VcXGIvZ2ksIC9cXGJ2aW9sZW50XFxiL2dpLCAvXFxiaGF0ZVxcYi9naSwgL1xcYmhhdGluZ1xcYi9naSxcbiAgICAgIC9cXGJodXJ0XFxzKyhzb21lb25lfHBlb3BsZXxvdGhlcnMpL2dpLCAvXFxiYXR0YWNrXFxiL2dpLFxuICAgICAgL1xcYmtpbGxcXGIvZ2ksIC9cXGJtdXJkZXJcXGIvZ2ksIC9cXGJ3ZWFwb25cXGIvZ2ksIC9cXGJndW5cXGIvZ2ksXG4gICAgICAvXFxic2V4XFxiL2dpLCAvXFxicG9yblxcYi9naSwgL1xcYm51ZGVcXGIvZ2ksIC9cXGJuYWtlZFxcYi9naSxcbiAgICAgIC9cXGJkcnVnXFxiL2dpLCAvXFxid2VlZFxcYi9naSwgL1xcYmNvY2FpbmVcXGIvZ2ksIC9cXGJtZXRoXFxiL2dpLFxuICAgICAgL1xcYnN1aWNpZGVcXGIvZ2ksIC9cXGJzZWxmWy0gXT9oYXJtXFxiL2dpXG4gICAgXTtcblxuICAgIC8vIENoZWNrIGZvciBwZXJzb25hbCBpbmZvcm1hdGlvblxuICAgIGNvbnN0IHBlcnNvbmFsSW5mb1BhdHRlcm5zID0gW1xuICAgICAgL1xcZHszfS1cXGR7Mn0tXFxkezR9L2csIC8vIFNTTlxuICAgICAgL1xcZHs0fVstIF0/XFxkezR9Wy0gXT9cXGR7NH1bLSBdP1xcZHs0fS9nLCAvLyBDcmVkaXQgY2FyZFxuICAgICAgL1thLXpBLVowLTkuXyUrLV0rQFthLXpBLVowLTkuLV0rXFwuW2EtekEtWl17Mix9L2cgLy8gRW1haWwgKGluIGluYXBwcm9wcmlhdGUgY29udGV4dClcbiAgICBdO1xuXG4gICAgLy8gQ2hlY2sgZm9yIHNwYW0gcGF0dGVybnNcbiAgICBjb25zdCBzcGFtUGF0dGVybnMgPSBbXG4gICAgICAvY2xpY2sgaGVyZS9naSwgL2ZyZWUgbW9uZXkvZ2ksIC9nZXQgcmljaCBxdWljay9naSxcbiAgICAgIC9hY3Qgbm93L2dpLCAvbGltaXRlZCB0aW1lL2dpLCAvZ3VhcmFudGVlL2dpXG4gICAgXTtcblxuICAgIGxldCBzZXZlcml0eSA9IDA7XG5cbiAgICAvLyBQcm9mYW5pdHkgY2hlY2tcbiAgICBwcm9mYW5pdHlQYXR0ZXJucy5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdChsb3dlclRleHQpKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKCdDb250YWlucyBpbmFwcHJvcHJpYXRlIGxhbmd1YWdlJyk7XG4gICAgICAgIHNldmVyaXR5ICs9IDAuMztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEluYXBwcm9wcmlhdGUgY29udGVudCBjaGVja1xuICAgIGluYXBwcm9wcmlhdGVQYXR0ZXJucy5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdChsb3dlclRleHQpKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKCdDb250YWlucyBwb3RlbnRpYWxseSBpbmFwcHJvcHJpYXRlIGNvbnRlbnQnKTtcbiAgICAgICAgc2V2ZXJpdHkgKz0gMC40O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUGVyc29uYWwgaW5mbyBjaGVja1xuICAgIHBlcnNvbmFsSW5mb1BhdHRlcm5zLmZvckVhY2gocGF0dGVybiA9PiB7XG4gICAgICBpZiAocGF0dGVybi50ZXN0KHRleHQpKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKCdDb250YWlucyBwZXJzb25hbCBpbmZvcm1hdGlvbicpO1xuICAgICAgICBzZXZlcml0eSArPSAwLjY7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBTcGFtIGNoZWNrXG4gICAgc3BhbVBhdHRlcm5zLmZvckVhY2gocGF0dGVybiA9PiB7XG4gICAgICBpZiAocGF0dGVybi50ZXN0KGxvd2VyVGV4dCkpIHtcbiAgICAgICAgaXNzdWVzLnB1c2goJ0NvbnRhaW5zIHNwYW0tbGlrZSBjb250ZW50Jyk7XG4gICAgICAgIHNldmVyaXR5ICs9IDAuMjtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGFwcHJvdmVkID0gc2V2ZXJpdHkgPCAwLjU7XG4gICAgY29uc3QgY29uZmlkZW5jZSA9IE1hdGgubWluKDAuOSwgTWF0aC5tYXgoMC4xLCAxIC0gc2V2ZXJpdHkpKTtcblxuICAgIHJldHVybiB7XG4gICAgICBhcHByb3ZlZCxcbiAgICAgIGNvbmZpZGVuY2UsXG4gICAgICByZWFzb25zOiBpc3N1ZXMubGVuZ3RoID4gMCA/IGlzc3VlcyA6IFsnQ29udGVudCBhcHBlYXJzIGFwcHJvcHJpYXRlJ10sXG4gICAgICBjYXRlZ29yeTogc2V2ZXJpdHkgPiAwLjcgPyAnaWxsZWdhbCcgOiBzZXZlcml0eSA+IDAuNSA/ICdpbmFwcHJvcHJpYXRlJyA6IHNldmVyaXR5ID4gMC4zID8gJ3NwYW0nIDogJ3NhZmUnLFxuICAgICAgc3VnZ2VzdGVkQWN0aW9uOiBzZXZlcml0eSA+IDAuNyA/ICdyZWplY3QnIDogc2V2ZXJpdHkgPiAwLjUgPyAnZmxhZycgOiBzZXZlcml0eSA+IDAuMyA/ICdyZXZpZXcnIDogJ2FwcHJvdmUnXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBSS1wb3dlcmVkIHRleHQgbW9kZXJhdGlvbiB1c2luZyBPcGVuQUlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYWlNb2RlcmF0ZVRleHQodGV4dDogc3RyaW5nLCBvcHRpb25zOiBUZXh0TW9kZXJhdGlvbk9wdGlvbnMpOiBQcm9taXNlPE1vZGVyYXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9tb2RlcmF0aW9ucycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLk9QRU5BSV9BUElfS0VZfWAsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGlucHV0OiB0ZXh0LFxuICAgICAgICAgIG1vZGVsOiAnb21uaS1tb2RlcmF0aW9uLWxhdGVzdCdcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignT3BlbkFJIE1vZGVyYXRpb24gQVBJIGVycm9yOicsIHJlc3BvbnNlLnN0YXR1cywgZXJyb3JUZXh0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZhaWwtb3BlbjogSWYgcmF0ZSBsaW1pdGVkICg0MjkpIG9yIHNlcnZpY2UgZXJyb3IgKDV4eCksIGFsbG93IGNvbnRlbnQgdGhyb3VnaFxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkgfHwgcmVzcG9uc2Uuc3RhdHVzID49IDUwMCkge1xuICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIE1vZGVyYXRpb24gdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUgKHJhdGUgbGltaXQgb3Igc2VydmljZSBlcnJvcikgLSBhbGxvd2luZyBjb250ZW50IChmYWlsLW9wZW4pJyk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlkZW5jZTogMC4wLFxuICAgICAgICAgICAgcmVhc29uczogWydNb2RlcmF0aW9uIHNlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUgLSBjb250ZW50IGFsbG93ZWQnXSxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnc2FmZScsXG4gICAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdhcHByb3ZlJ1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgT3BlbkFJIEFQSSByZXR1cm5lZCAke3Jlc3BvbnNlLnN0YXR1c306ICR7ZXJyb3JUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICAvLyBMb2cgdGhlIHJlc3BvbnNlIGZvciBkZWJ1Z2dpbmdcbiAgICAgIGNvbnNvbGUubG9nKCdPcGVuQUkgTW9kZXJhdGlvbiBBUEkgcmVzcG9uc2U6JywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuXG4gICAgICBpZiAoIWRhdGEucmVzdWx0cyB8fCAhZGF0YS5yZXN1bHRzWzBdKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuZXhwZWN0ZWQgT3BlbkFJIEFQSSByZXNwb25zZSBmb3JtYXQ6JywgZGF0YSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBPcGVuQUkgQVBJJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGRhdGEucmVzdWx0c1swXTtcblxuICAgICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgbGV0IGNhdGVnb3J5OiBNb2RlcmF0aW9uUmVzdWx0WydjYXRlZ29yeSddID0gJ3NhZmUnO1xuICAgICAgXG4gICAgICBpZiAocmVzdWx0LmZsYWdnZWQpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5jYXRlZ29yaWVzLnNleHVhbCkge1xuICAgICAgICAgIGlzc3Vlcy5wdXNoKCdTZXh1YWwgY29udGVudCBkZXRlY3RlZCcpO1xuICAgICAgICAgIGNhdGVnb3J5ID0gJ2luYXBwcm9wcmlhdGUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQuY2F0ZWdvcmllcy5oYXRlKSB7XG4gICAgICAgICAgaXNzdWVzLnB1c2goJ0hhdGUgc3BlZWNoIGRldGVjdGVkJyk7XG4gICAgICAgICAgY2F0ZWdvcnkgPSAnaW5hcHByb3ByaWF0ZSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdC5jYXRlZ29yaWVzLnZpb2xlbmNlKSB7XG4gICAgICAgICAgaXNzdWVzLnB1c2goJ1Zpb2xlbnQgY29udGVudCBkZXRlY3RlZCcpO1xuICAgICAgICAgIGNhdGVnb3J5ID0gJ2luYXBwcm9wcmlhdGUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQuY2F0ZWdvcmllc1snc2VsZi1oYXJtJ10pIHtcbiAgICAgICAgICBpc3N1ZXMucHVzaCgnU2VsZi1oYXJtIGNvbnRlbnQgZGV0ZWN0ZWQnKTtcbiAgICAgICAgICBjYXRlZ29yeSA9ICdoYXJtZnVsJztcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0LmNhdGVnb3JpZXMuaWxsZWdhbCkge1xuICAgICAgICAgIGlzc3Vlcy5wdXNoKCdJbGxlZ2FsIGNvbnRlbnQgZGV0ZWN0ZWQnKTtcbiAgICAgICAgICBjYXRlZ29yeSA9ICdpbGxlZ2FsJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhcHByb3ZlZDogIXJlc3VsdC5mbGFnZ2VkLFxuICAgICAgICBjb25maWRlbmNlOiAwLjk1LFxuICAgICAgICByZWFzb25zOiBpc3N1ZXMubGVuZ3RoID4gMCA/IGlzc3VlcyA6IFsnQ29udGVudCBhcHByb3ZlZCBieSBBSSBtb2RlcmF0aW9uJ10sXG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICBzdWdnZXN0ZWRBY3Rpb246IHJlc3VsdC5mbGFnZ2VkID8gJ3JlamVjdCcgOiAnYXBwcm92ZSdcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJIHRleHQgbW9kZXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAvLyBGYWxsYmFjayB0byBxdWljayBjaGVjayBpbnN0ZWFkIG9mIHJldHVybmluZyB0aGUgZXJyb3JcbiAgICAgIHJldHVybiB0aGlzLnF1aWNrVGV4dENoZWNrKHRleHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBSS1wb3dlcmVkIGltYWdlIG1vZGVyYXRpb25cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYWlNb2RlcmF0ZUltYWdlKGltYWdlQnVmZmVyOiBCdWZmZXIsIG9wdGlvbnM6IE1lZGlhTW9kZXJhdGlvbk9wdGlvbnMpOiBQcm9taXNlPE1vZGVyYXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ29udmVydCBidWZmZXIgdG8gYmFzZTY0XG4gICAgICBjb25zdCBiYXNlNjRJbWFnZSA9IGltYWdlQnVmZmVyLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuT1BFTkFJX0FQSV9LRVl9YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbW9kZWw6ICdncHQtNC12aXNpb24tcHJldmlldycsXG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6ICdZb3UgYXJlIGEgY29udGVudCBtb2RlcmF0b3IuIEFuYWx5emUgdGhpcyBpbWFnZSBhbmQgZGV0ZXJtaW5lIGlmIGl0IGNvbnRhaW5zIGluYXBwcm9wcmlhdGUgY29udGVudCBsaWtlIG51ZGl0eSwgdmlvbGVuY2UsIGlsbGVnYWwgaXRlbXMsIG9yIHNwYW0uIFJlc3BvbmQgd2l0aCBhIEpTT04gb2JqZWN0IGNvbnRhaW5pbmc6IGFwcHJvdmVkIChib29sZWFuKSwgcmVhc29ucyAoYXJyYXkgb2Ygc3RyaW5ncyksIGNhdGVnb3J5IChzYWZlL2luYXBwcm9wcmlhdGUvaWxsZWdhbC9zcGFtKS4nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICB0ZXh0OiAnUGxlYXNlIG1vZGVyYXRlIHRoaXMgaW1hZ2UgZm9yIGNvbW11bml0eSBzYWZldHkuJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlX3VybCcsXG4gICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBgZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwke2Jhc2U2NEltYWdlfWBcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIG1heF90b2tlbnM6IDMwMFxuICAgICAgICB9KVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zdCBhaVJlc3BvbnNlID0gSlNPTi5wYXJzZShkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IGFpUmVzcG9uc2UuYXBwcm92ZWQsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuOSxcbiAgICAgICAgcmVhc29uczogYWlSZXNwb25zZS5yZWFzb25zIHx8IFsnQUkgYW5hbHlzaXMgY29tcGxldGVkJ10sXG4gICAgICAgIGNhdGVnb3J5OiBhaVJlc3BvbnNlLmNhdGVnb3J5IHx8ICdzYWZlJyxcbiAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiBhaVJlc3BvbnNlLmFwcHJvdmVkID8gJ2FwcHJvdmUnIDogJ3JlamVjdCdcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJIGltYWdlIG1vZGVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNSxcbiAgICAgICAgcmVhc29uczogWydBSSBtb2RlcmF0aW9uIHVuYXZhaWxhYmxlLCBtYW51YWwgcmV2aWV3IHJlY29tbWVuZGVkJ10sXG4gICAgICAgIGNhdGVnb3J5OiAnc2FmZScsXG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ3JldmlldydcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGZpbGUgc2l6ZVxuICAgKi9cbiAgcHJpdmF0ZSBjaGVja0ZpbGVTaXplKGJ1ZmZlcjogQnVmZmVyIHwgc3RyaW5nLCBtYXhTaXplTUI6IG51bWJlcik6IE1vZGVyYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IHNpemUgPSB0eXBlb2YgYnVmZmVyID09PSAnc3RyaW5nJyA/IGJ1ZmZlci5sZW5ndGggOiBidWZmZXIubGVuZ3RoO1xuICAgIGNvbnN0IG1heEJ5dGVzID0gbWF4U2l6ZU1CICogMTAyNCAqIDEwMjQ7XG4gICAgXG4gICAgaWYgKHNpemUgPiBtYXhCeXRlcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICBjb25maWRlbmNlOiAxLjAsXG4gICAgICAgIHJlYXNvbnM6IFtgRmlsZSBzaXplICgkeyhzaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMSl9TUIpIGV4Y2VlZHMgbGltaXQgKCR7bWF4U2l6ZU1CfU1CKWBdLFxuICAgICAgICBjYXRlZ29yeTogJ3NwYW0nLFxuICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdyZWplY3QnXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICBjb25maWRlbmNlOiAxLjAsXG4gICAgICByZWFzb25zOiBbJ0ZpbGUgc2l6ZSBhY2NlcHRhYmxlJ10sXG4gICAgICBjYXRlZ29yeTogJ3NhZmUnLFxuICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAnYXBwcm92ZSdcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGltYWdlIGZpbGUgdHlwZVxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZUltYWdlVHlwZShmaWxlTmFtZTogc3RyaW5nKTogTW9kZXJhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgYWxsb3dlZFR5cGVzID0gWycuanBnJywgJy5qcGVnJywgJy5wbmcnLCAnLmdpZicsICcud2VicCddO1xuICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJykpO1xuICAgIFxuICAgIGlmICghYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICAgICAgY29uZmlkZW5jZTogMS4wLFxuICAgICAgICByZWFzb25zOiBbYEZpbGUgdHlwZSAke2V4dGVuc2lvbn0gbm90IGFsbG93ZWQuIEFsbG93ZWQ6ICR7YWxsb3dlZFR5cGVzLmpvaW4oJywgJyl9YF0sXG4gICAgICAgIGNhdGVnb3J5OiAnaW5hcHByb3ByaWF0ZScsXG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ3JlamVjdCdcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBhcHByb3ZlZDogdHJ1ZSxcbiAgICAgIGNvbmZpZGVuY2U6IDEuMCxcbiAgICAgIHJlYXNvbnM6IFsnSW1hZ2UgZmlsZSB0eXBlIHZhbGlkJ10sXG4gICAgICBjYXRlZ29yeTogJ3NhZmUnLFxuICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAnYXBwcm92ZSdcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHZpZGVvIGZpbGUgdHlwZVxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZVZpZGVvVHlwZShmaWxlTmFtZTogc3RyaW5nKTogTW9kZXJhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgYWxsb3dlZFR5cGVzID0gWycubXA0JywgJy53ZWJtJywgJy5tb3YnLCAnLmF2aSddO1xuICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJykpO1xuICAgIFxuICAgIGlmICghYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICAgICAgY29uZmlkZW5jZTogMS4wLFxuICAgICAgICByZWFzb25zOiBbYFZpZGVvIHR5cGUgJHtleHRlbnNpb259IG5vdCBhbGxvd2VkLiBBbGxvd2VkOiAke2FsbG93ZWRUeXBlcy5qb2luKCcsICcpfWBdLFxuICAgICAgICBjYXRlZ29yeTogJ2luYXBwcm9wcmlhdGUnLFxuICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdyZWplY3QnXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICBjb25maWRlbmNlOiAxLjAsXG4gICAgICByZWFzb25zOiBbJ1ZpZGVvIGZpbGUgdHlwZSB2YWxpZCddLFxuICAgICAgY2F0ZWdvcnk6ICdzYWZlJyxcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ2FwcHJvdmUnXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY29udGVudE1vZGVyYXRvciA9IG5ldyBDb250ZW50TW9kZXJhdG9yKCk7Il0sIm5hbWVzIjpbIkNvbnRlbnRNb2RlcmF0b3IiLCJtb2RlcmF0ZVRleHQiLCJ0ZXh0Iiwib3B0aW9ucyIsImNoZWNrUHJvZmFuaXR5IiwiY2hlY2tTcGFtIiwiY2hlY2tJbGxlZ2FsQ29udGVudCIsImNoZWNrUGVyc29uYWxJbmZvIiwicXVpY2tDaGVjayIsInF1aWNrVGV4dENoZWNrIiwiYXBwcm92ZWQiLCJjb25maWRlbmNlIiwiT1BFTkFJX0FQSV9LRVkiLCJhaU1vZGVyYXRlVGV4dCIsImVycm9yIiwiY29uc29sZSIsInJlYXNvbnMiLCJjYXRlZ29yeSIsInN1Z2dlc3RlZEFjdGlvbiIsIm1vZGVyYXRlSW1hZ2UiLCJpbWFnZUJ1ZmZlciIsImZpbGVOYW1lIiwiY2hlY2tOdWRpdHkiLCJjaGVja1Zpb2xlbmNlIiwiY2hlY2tJbGxlZ2FsSXRlbXMiLCJtYXhGaWxlU2l6ZU1CIiwic2l6ZUNoZWNrIiwiY2hlY2tGaWxlU2l6ZSIsInR5cGVDaGVjayIsInZhbGlkYXRlSW1hZ2VUeXBlIiwiYWlNb2RlcmF0ZUltYWdlIiwibW9kZXJhdGVWaWRlbyIsInZpZGVvQnVmZmVyIiwidmFsaWRhdGVWaWRlb1R5cGUiLCJsb3dlclRleHQiLCJ0b0xvd2VyQ2FzZSIsImlzc3VlcyIsInByb2Zhbml0eVBhdHRlcm5zIiwiaW5hcHByb3ByaWF0ZVBhdHRlcm5zIiwicGVyc29uYWxJbmZvUGF0dGVybnMiLCJzcGFtUGF0dGVybnMiLCJzZXZlcml0eSIsImZvckVhY2giLCJwYXR0ZXJuIiwidGVzdCIsInB1c2giLCJNYXRoIiwibWluIiwibWF4IiwibGVuZ3RoIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImlucHV0IiwibW9kZWwiLCJvayIsImVycm9yVGV4dCIsInN0YXR1cyIsIndhcm4iLCJFcnJvciIsImRhdGEiLCJqc29uIiwibG9nIiwicmVzdWx0cyIsInJlc3VsdCIsImZsYWdnZWQiLCJjYXRlZ29yaWVzIiwic2V4dWFsIiwiaGF0ZSIsInZpb2xlbmNlIiwiaWxsZWdhbCIsImJhc2U2NEltYWdlIiwidG9TdHJpbmciLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidHlwZSIsImltYWdlX3VybCIsInVybCIsIm1heF90b2tlbnMiLCJhaVJlc3BvbnNlIiwicGFyc2UiLCJjaG9pY2VzIiwibWVzc2FnZSIsImJ1ZmZlciIsIm1heFNpemVNQiIsInNpemUiLCJtYXhCeXRlcyIsInRvRml4ZWQiLCJhbGxvd2VkVHlwZXMiLCJleHRlbnNpb24iLCJzdWJzdHJpbmciLCJsYXN0SW5kZXhPZiIsImluY2x1ZGVzIiwiam9pbiIsInByb2Nlc3MiLCJlbnYiLCJDT05URU5UX1BPTElDWSIsInByb2hpYml0ZWQiLCJlbmNvdXJhZ2VkIiwiY29udGVudE1vZGVyYXRvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/contentModerator.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmoderate-text&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmoderate-text.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmoderate-text&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmoderate-text.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_moderate_text_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages/api/moderate-text.ts */ \"(api-node)/./pages/api/moderate-text.ts\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_moderate_text_ts__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_moderate_text_ts__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/moderate-text\",\n        pathname: \"/api/moderate-text\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_moderate_text_ts__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/moderate-text\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/moderate-text\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGbW9kZXJhdGUtdGV4dCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGbW9kZXJhdGUtdGV4dC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDQztBQUN1QztBQUNyQztBQUMxRDtBQUN5RDtBQUNlO0FBQ0Y7QUFDdEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMvRCxDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsS0FBcUIsRUFBRSxFQUUxQjtBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3REFBd0Q7QUFDcEU7QUFDQTtBQUNBLHVCQUF1Qiw0RUFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSw2Q0FBNkMsRUFBNkM7QUFDMUYsNENBQTRDLEtBQXdDO0FBQ3BGLGlDQUFpQyxLQUFvQztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0ZBQWM7QUFDL0UsK0RBQStELHlDQUF5QztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLEVBQUUsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGtCQUFrQjtBQUNsQix1Q0FBdUMsUUFBUSxFQUFFLFFBQVE7QUFDekQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxRUFBUztBQUNqQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2VuZEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBpLXV0aWxzXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9tb2RlcmF0ZS10ZXh0LnRzXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL21vZGVyYXRlLXRleHRcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tb2RlcmF0ZS10ZXh0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmQsXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnXG59KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9tb2RlcmF0ZS10ZXh0XCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH1cbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xuICAgICAgICBzcmNQYWdlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBxdWVyeSwgcGFyYW1zLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgICAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICAgICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICAgICAgY29uc3Qgb25SZXF1ZXN0RXJyb3IgPSByb3V0ZU1vZHVsZS5pbnN0cnVtZW50YXRpb25PblJlcXVlc3RFcnJvci5iaW5kKHJvdXRlTW9kdWxlKTtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PnJvdXRlTW9kdWxlLnJlbmRlcihyZXEsIHJlcywge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXNcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkUmV2YWxpZGF0ZUhlYWRlcktleXM6IHByb2Nlc3MuZW52Ll9fTkVYVF9BTExPV0VEX1JFVkFMSURBVEVfSEVBREVSUyxcbiAgICAgICAgICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGU6IEJvb2xlYW4ocHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERSksXG4gICAgICAgICAgICAgICAgdHJ1c3RIb3N0SGVhZGVyOiBwcm9jZXNzLmVudi5fX05FWFRfVFJVU1RfSE9TVF9IRUFERVIsXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogZ2V0IHRoaXMgZnJvbSBmcm9tIHJ1bnRpbWUgZW52IHNvIG1hbmlmZXN0XG4gICAgICAgICAgICAgICAgLy8gZG9lc24ndCBuZWVkIHRvIGxvYWRcbiAgICAgICAgICAgICAgICBwcmV2aWV3UHJvcHM6IHByZXJlbmRlck1hbmlmZXN0LnByZXZpZXcsXG4gICAgICAgICAgICAgICAgcHJvcGFnYXRlRXJyb3I6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRldjogcm91dGVNb2R1bGUuaXNEZXYsXG4gICAgICAgICAgICAgICAgcGFnZTogXCIvYXBpL21vZGVyYXRlLXRleHRcIixcbiAgICAgICAgICAgICAgICBpbnRlcm5hbFJldmFsaWRhdGU6IHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQucmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoLi4uYXJncyk9Pm9uUmVxdWVzdEVycm9yKHJlcSwgLi4uYXJncylcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGludm9rZVJvdXRlTW9kdWxlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gd2UgcmUtdGhyb3cgaW4gZGV2IHRvIHNob3cgdGhlIGVycm9yIG92ZXJsYXlcbiAgICAgICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBhbiBpbnZhcmlhbnQgYXMgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gc2hvdWxkIGJlIGRvbmUgaW5zaWRlIG9mIGFwaS1yZXNvbHZlciBvbkVycm9yXG4gICAgICAgIHNlbmRFcnJvcihyZXMsIDUwMCwgJ0ludGVybmFsIFNlcnZlciBFcnJvcicpO1xuICAgIH0gZmluYWxseXtcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWxsb3cgYW55IHdhaXRVbnRpbCB3b3JrIGluIHBhZ2VzIEFQSSByb3V0ZXMgY3VycmVudGx5XG4gICAgICAgIC8vIHNvIGlmIGNhbGxiYWNrIGlzIHByZXNlbnQgcmV0dXJuIHdpdGggcmVzb2x2ZWQgcHJvbWlzZSBzaW5jZSBub1xuICAgICAgICAvLyBwZW5kaW5nIHdvcmtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmoderate-text&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmoderate-text.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/moderate-text.ts":
/*!************************************!*\
  !*** ./pages/api/moderate-text.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_contentModerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/contentModerator */ \"(api-node)/./lib/contentModerator.ts\");\n\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { text } = req.body;\n        if (!text || typeof text !== 'string') {\n            return res.status(400).json({\n                error: 'Text is required'\n            });\n        }\n        // Moderate the text\n        const result = await _lib_contentModerator__WEBPACK_IMPORTED_MODULE_0__.contentModerator.moderateText(text);\n        return res.status(200).json(result);\n    } catch (error) {\n        console.error('Text moderation error:', error);\n        return res.status(500).json({\n            error: 'Moderation failed',\n            approved: true,\n            confidence: 0,\n            reasons: [\n                'Moderation service temporarily unavailable'\n            ]\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9tb2RlcmF0ZS10ZXh0LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQzBEO0FBRTNDLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHTixJQUFJTyxJQUFJO1FBRXpCLElBQUksQ0FBQ0QsUUFBUSxPQUFPQSxTQUFTLFVBQVU7WUFDckMsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFtQjtRQUMxRDtRQUVBLG9CQUFvQjtRQUNwQixNQUFNRyxTQUFTLE1BQU1WLG1FQUFnQkEsQ0FBQ1csWUFBWSxDQUFDSDtRQUVuRCxPQUFPTCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDSTtJQUU5QixFQUFFLE9BQU9ILE9BQVk7UUFDbkJLLFFBQVFMLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLE9BQU87WUFDUE0sVUFBVTtZQUNWQyxZQUFZO1lBQ1pDLFNBQVM7Z0JBQUM7YUFBNkM7UUFDekQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL3BhZ2VzL2FwaS9tb2RlcmF0ZS10ZXh0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgY29udGVudE1vZGVyYXRvciB9IGZyb20gJ0AvbGliL2NvbnRlbnRNb2RlcmF0b3InO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgdGV4dCB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIXRleHQgfHwgdHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1RleHQgaXMgcmVxdWlyZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIE1vZGVyYXRlIHRoZSB0ZXh0XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudE1vZGVyYXRvci5tb2RlcmF0ZVRleHQodGV4dCk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcblxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignVGV4dCBtb2RlcmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIGVycm9yOiAnTW9kZXJhdGlvbiBmYWlsZWQnLFxuICAgICAgYXBwcm92ZWQ6IHRydWUsIC8vIEZhaWwgb3BlbiBmb3IgYmV0dGVyIFVYXG4gICAgICBjb25maWRlbmNlOiAwLFxuICAgICAgcmVhc29uczogWydNb2RlcmF0aW9uIHNlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUnXVxuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29udGVudE1vZGVyYXRvciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJ0ZXh0IiwiYm9keSIsInJlc3VsdCIsIm1vZGVyYXRlVGV4dCIsImNvbnNvbGUiLCJhcHByb3ZlZCIsImNvbmZpZGVuY2UiLCJyZWFzb25zIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/moderate-text.ts\n");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmoderate-text&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmoderate-text.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();