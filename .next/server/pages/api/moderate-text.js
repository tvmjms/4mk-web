"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/moderate-text";
exports.ids = ["pages/api/moderate-text"];
exports.modules = {

/***/ "(api-node)/./lib/contentModerator.ts":
/*!*********************************!*\
  !*** ./lib/contentModerator.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   contentModerator: () => (/* binding */ contentModerator)\n/* harmony export */ });\n// lib/contentModerator.ts\n// AI-powered content moderation service for text, images, and videos\nclass ContentModerator {\n    /**\n   * Moderate text content using AI\n   */ async moderateText(text, options = {\n        checkProfanity: true,\n        checkSpam: true,\n        checkIllegalContent: true,\n        checkPersonalInfo: true\n    }) {\n        try {\n            // Simple pattern-based checks first (fast)\n            const quickCheck = this.quickTextCheck(text);\n            if (!quickCheck.approved && quickCheck.confidence > 0.8) {\n                return quickCheck;\n            }\n            // AI-powered deep analysis for complex cases\n            if (this.OPENAI_API_KEY) {\n                return await this.aiModerateText(text, options);\n            }\n            return quickCheck;\n        } catch (error) {\n            console.error('Text moderation error:', error);\n            return {\n                approved: false,\n                confidence: 0.5,\n                reasons: [\n                    'Moderation service temporarily unavailable'\n                ],\n                category: 'safe',\n                suggestedAction: 'review'\n            };\n        }\n    }\n    /**\n   * Moderate image content\n   */ async moderateImage(imageBuffer, fileName, options = {\n        checkNudity: true,\n        checkViolence: true,\n        checkIllegalItems: true,\n        checkSpam: true,\n        maxFileSizeMB: 10\n    }) {\n        try {\n            // File size check\n            const sizeCheck = this.checkFileSize(imageBuffer, options.maxFileSizeMB);\n            if (!sizeCheck.approved) return sizeCheck;\n            // File type validation\n            const typeCheck = this.validateImageType(fileName);\n            if (!typeCheck.approved) return typeCheck;\n            // AI-powered image analysis\n            if (this.OPENAI_API_KEY && typeof imageBuffer !== 'string') {\n                return await this.aiModerateImage(imageBuffer, options);\n            }\n            // Fallback to basic approval for file uploads\n            return {\n                approved: true,\n                confidence: 0.7,\n                reasons: [\n                    'Basic validation passed'\n                ],\n                category: 'safe',\n                suggestedAction: 'approve'\n            };\n        } catch (error) {\n            console.error('Image moderation error:', error);\n            return {\n                approved: false,\n                confidence: 0.5,\n                reasons: [\n                    'Image analysis failed'\n                ],\n                category: 'safe',\n                suggestedAction: 'review'\n            };\n        }\n    }\n    /**\n   * Moderate video content\n   */ async moderateVideo(videoBuffer, fileName, options = {\n        checkNudity: true,\n        checkViolence: true,\n        checkIllegalItems: true,\n        checkSpam: true,\n        maxFileSizeMB: 50\n    }) {\n        try {\n            // File size check\n            const sizeCheck = this.checkFileSize(videoBuffer, options.maxFileSizeMB);\n            if (!sizeCheck.approved) return sizeCheck;\n            // File type validation\n            const typeCheck = this.validateVideoType(fileName);\n            if (!typeCheck.approved) return typeCheck;\n            // For now, basic approval - can be enhanced with video AI later\n            return {\n                approved: true,\n                confidence: 0.6,\n                reasons: [\n                    'Basic video validation passed'\n                ],\n                category: 'safe',\n                suggestedAction: 'approve'\n            };\n        } catch (error) {\n            console.error('Video moderation error:', error);\n            return {\n                approved: false,\n                confidence: 0.5,\n                reasons: [\n                    'Video analysis failed'\n                ],\n                category: 'safe',\n                suggestedAction: 'review'\n            };\n        }\n    }\n    /**\n   * Quick pattern-based text checking\n   */ quickTextCheck(text) {\n        const lowerText = text.toLowerCase();\n        const issues = [];\n        // Check for obvious profanity/inappropriate content\n        const profanityPatterns = [\n            /f[*u]ck/gi,\n            /sh[*i]t/gi,\n            /b[*i]tch/gi,\n            /d[*a]mn/gi,\n            /ass(hole)?/gi,\n            /crap/gi\n        ];\n        const inappropriatePatterns = [\n            /\\bviolence\\b/gi,\n            /\\bviolent\\b/gi,\n            /\\bhate\\b/gi,\n            /\\bhating\\b/gi,\n            /\\bhurt\\s+(someone|people|others)/gi,\n            /\\battack\\b/gi,\n            /\\bkill\\b/gi,\n            /\\bmurder\\b/gi,\n            /\\bweapon\\b/gi,\n            /\\bgun\\b/gi,\n            /\\bsex\\b/gi,\n            /\\bporn\\b/gi,\n            /\\bnude\\b/gi,\n            /\\bnaked\\b/gi,\n            /\\bdrug\\b/gi,\n            /\\bweed\\b/gi,\n            /\\bcocaine\\b/gi,\n            /\\bmeth\\b/gi,\n            /\\bsuicide\\b/gi,\n            /\\bself[- ]?harm\\b/gi\n        ];\n        // Check for personal information\n        const personalInfoPatterns = [\n            /\\d{3}-\\d{2}-\\d{4}/g,\n            /\\d{4}[- ]?\\d{4}[- ]?\\d{4}[- ]?\\d{4}/g,\n            /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g // Email (in inappropriate context)\n        ];\n        // Check for spam patterns\n        const spamPatterns = [\n            /click here/gi,\n            /free money/gi,\n            /get rich quick/gi,\n            /act now/gi,\n            /limited time/gi,\n            /guarantee/gi\n        ];\n        let severity = 0;\n        // Profanity check\n        profanityPatterns.forEach((pattern)=>{\n            if (pattern.test(lowerText)) {\n                issues.push('Contains inappropriate language');\n                severity += 0.3;\n            }\n        });\n        // Inappropriate content check\n        inappropriatePatterns.forEach((pattern)=>{\n            if (pattern.test(lowerText)) {\n                issues.push('Contains potentially inappropriate content');\n                severity += 0.4;\n            }\n        });\n        // Personal info check\n        personalInfoPatterns.forEach((pattern)=>{\n            if (pattern.test(text)) {\n                issues.push('Contains personal information');\n                severity += 0.6;\n            }\n        });\n        // Spam check\n        spamPatterns.forEach((pattern)=>{\n            if (pattern.test(lowerText)) {\n                issues.push('Contains spam-like content');\n                severity += 0.2;\n            }\n        });\n        const approved = severity < 0.5;\n        const confidence = Math.min(0.9, Math.max(0.1, 1 - severity));\n        return {\n            approved,\n            confidence,\n            reasons: issues.length > 0 ? issues : [\n                'Content appears appropriate'\n            ],\n            category: severity > 0.7 ? 'illegal' : severity > 0.5 ? 'inappropriate' : severity > 0.3 ? 'spam' : 'safe',\n            suggestedAction: severity > 0.7 ? 'reject' : severity > 0.5 ? 'flag' : severity > 0.3 ? 'review' : 'approve'\n        };\n    }\n    /**\n   * AI-powered text moderation using OpenAI\n   */ async aiModerateText(text, options) {\n        try {\n            const response = await fetch('https://api.openai.com/v1/moderations', {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${this.OPENAI_API_KEY}`,\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    input: text,\n                    model: 'omni-moderation-latest'\n                })\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                console.error('OpenAI Moderation API error:', response.status, errorText);\n                throw new Error(`OpenAI API returned ${response.status}: ${errorText}`);\n            }\n            const data = await response.json();\n            // Log the response for debugging\n            console.log('OpenAI Moderation API response:', JSON.stringify(data));\n            if (!data.results || !data.results[0]) {\n                console.error('Unexpected OpenAI API response format:', data);\n                throw new Error('Invalid response format from OpenAI API');\n            }\n            const result = data.results[0];\n            const issues = [];\n            let category = 'safe';\n            if (result.flagged) {\n                if (result.categories.sexual) {\n                    issues.push('Sexual content detected');\n                    category = 'inappropriate';\n                }\n                if (result.categories.hate) {\n                    issues.push('Hate speech detected');\n                    category = 'inappropriate';\n                }\n                if (result.categories.violence) {\n                    issues.push('Violent content detected');\n                    category = 'inappropriate';\n                }\n                if (result.categories['self-harm']) {\n                    issues.push('Self-harm content detected');\n                    category = 'harmful';\n                }\n                if (result.categories.illegal) {\n                    issues.push('Illegal content detected');\n                    category = 'illegal';\n                }\n            }\n            return {\n                approved: !result.flagged,\n                confidence: 0.95,\n                reasons: issues.length > 0 ? issues : [\n                    'Content approved by AI moderation'\n                ],\n                category,\n                suggestedAction: result.flagged ? 'reject' : 'approve'\n            };\n        } catch (error) {\n            console.error('AI text moderation error:', error);\n            // Fallback to quick check instead of returning the error\n            return this.quickTextCheck(text);\n        }\n    }\n    /**\n   * AI-powered image moderation\n   */ async aiModerateImage(imageBuffer, options) {\n        try {\n            // Convert buffer to base64\n            const base64Image = imageBuffer.toString('base64');\n            const response = await fetch('https://api.openai.com/v1/chat/completions', {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${this.OPENAI_API_KEY}`,\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    model: 'gpt-4-vision-preview',\n                    messages: [\n                        {\n                            role: 'system',\n                            content: 'You are a content moderator. Analyze this image and determine if it contains inappropriate content like nudity, violence, illegal items, or spam. Respond with a JSON object containing: approved (boolean), reasons (array of strings), category (safe/inappropriate/illegal/spam).'\n                        },\n                        {\n                            role: 'user',\n                            content: [\n                                {\n                                    type: 'text',\n                                    text: 'Please moderate this image for community safety.'\n                                },\n                                {\n                                    type: 'image_url',\n                                    image_url: {\n                                        url: `data:image/jpeg;base64,${base64Image}`\n                                    }\n                                }\n                            ]\n                        }\n                    ],\n                    max_tokens: 300\n                })\n            });\n            const data = await response.json();\n            const aiResponse = JSON.parse(data.choices[0].message.content);\n            return {\n                approved: aiResponse.approved,\n                confidence: 0.9,\n                reasons: aiResponse.reasons || [\n                    'AI analysis completed'\n                ],\n                category: aiResponse.category || 'safe',\n                suggestedAction: aiResponse.approved ? 'approve' : 'reject'\n            };\n        } catch (error) {\n            console.error('AI image moderation error:', error);\n            return {\n                approved: true,\n                confidence: 0.5,\n                reasons: [\n                    'AI moderation unavailable, manual review recommended'\n                ],\n                category: 'safe',\n                suggestedAction: 'review'\n            };\n        }\n    }\n    /**\n   * Validate file size\n   */ checkFileSize(buffer, maxSizeMB) {\n        const size = typeof buffer === 'string' ? buffer.length : buffer.length;\n        const maxBytes = maxSizeMB * 1024 * 1024;\n        if (size > maxBytes) {\n            return {\n                approved: false,\n                confidence: 1.0,\n                reasons: [\n                    `File size (${(size / 1024 / 1024).toFixed(1)}MB) exceeds limit (${maxSizeMB}MB)`\n                ],\n                category: 'spam',\n                suggestedAction: 'reject'\n            };\n        }\n        return {\n            approved: true,\n            confidence: 1.0,\n            reasons: [\n                'File size acceptable'\n            ],\n            category: 'safe',\n            suggestedAction: 'approve'\n        };\n    }\n    /**\n   * Validate image file type\n   */ validateImageType(fileName) {\n        const allowedTypes = [\n            '.jpg',\n            '.jpeg',\n            '.png',\n            '.gif',\n            '.webp'\n        ];\n        const extension = fileName.toLowerCase().substring(fileName.lastIndexOf('.'));\n        if (!allowedTypes.includes(extension)) {\n            return {\n                approved: false,\n                confidence: 1.0,\n                reasons: [\n                    `File type ${extension} not allowed. Allowed: ${allowedTypes.join(', ')}`\n                ],\n                category: 'inappropriate',\n                suggestedAction: 'reject'\n            };\n        }\n        return {\n            approved: true,\n            confidence: 1.0,\n            reasons: [\n                'Image file type valid'\n            ],\n            category: 'safe',\n            suggestedAction: 'approve'\n        };\n    }\n    /**\n   * Validate video file type\n   */ validateVideoType(fileName) {\n        const allowedTypes = [\n            '.mp4',\n            '.webm',\n            '.mov',\n            '.avi'\n        ];\n        const extension = fileName.toLowerCase().substring(fileName.lastIndexOf('.'));\n        if (!allowedTypes.includes(extension)) {\n            return {\n                approved: false,\n                confidence: 1.0,\n                reasons: [\n                    `Video type ${extension} not allowed. Allowed: ${allowedTypes.join(', ')}`\n                ],\n                category: 'inappropriate',\n                suggestedAction: 'reject'\n            };\n        }\n        return {\n            approved: true,\n            confidence: 1.0,\n            reasons: [\n                'Video file type valid'\n            ],\n            category: 'safe',\n            suggestedAction: 'approve'\n        };\n    }\n    constructor(){\n        this.OPENAI_API_KEY = process.env.OPENAI_API_KEY;\n        this.CONTENT_POLICY = {\n            // Define what's not allowed\n            prohibited: [\n                'explicit sexual content',\n                'violence or threats',\n                'illegal drugs or weapons',\n                'hate speech',\n                'personal information (SSN, credit cards)',\n                'spam or promotional content',\n                'scams or fraudulent offers',\n                'inappropriate images of minors'\n            ],\n            // Define what's encouraged\n            encouraged: [\n                'community assistance',\n                'respectful communication',\n                'legitimate help requests',\n                'appropriate documentation'\n            ]\n        };\n    }\n}\nconst contentModerator = new ContentModerator();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBbUIsSUFBSXZHLG1CQUFtQiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9saWIvY29udGVudE1vZGVyYXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvY29udGVudE1vZGVyYXRvci50c1xuLy8gQUktcG93ZXJlZCBjb250ZW50IG1vZGVyYXRpb24gc2VydmljZSBmb3IgdGV4dCwgaW1hZ2VzLCBhbmQgdmlkZW9zXG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZXJhdGlvblJlc3VsdCB7XG4gIGFwcHJvdmVkOiBib29sZWFuO1xuICBjb25maWRlbmNlOiBudW1iZXI7XG4gIHJlYXNvbnM6IHN0cmluZ1tdO1xuICBjYXRlZ29yeTogJ3NhZmUnIHwgJ2luYXBwcm9wcmlhdGUnIHwgJ2lsbGVnYWwnIHwgJ3NwYW0nIHwgJ2hhcm1mdWwnO1xuICBzdWdnZXN0ZWRBY3Rpb246ICdhcHByb3ZlJyB8ICdyZXZpZXcnIHwgJ3JlamVjdCcgfCAnZmxhZyc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dE1vZGVyYXRpb25PcHRpb25zIHtcbiAgY2hlY2tQcm9mYW5pdHk6IGJvb2xlYW47XG4gIGNoZWNrU3BhbTogYm9vbGVhbjtcbiAgY2hlY2tJbGxlZ2FsQ29udGVudDogYm9vbGVhbjtcbiAgY2hlY2tQZXJzb25hbEluZm86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWFNb2RlcmF0aW9uT3B0aW9ucyB7XG4gIGNoZWNrTnVkaXR5OiBib29sZWFuO1xuICBjaGVja1Zpb2xlbmNlOiBib29sZWFuO1xuICBjaGVja0lsbGVnYWxJdGVtczogYm9vbGVhbjtcbiAgY2hlY2tTcGFtOiBib29sZWFuO1xuICBtYXhGaWxlU2l6ZU1COiBudW1iZXI7XG59XG5cbmNsYXNzIENvbnRlbnRNb2RlcmF0b3Ige1xuICBwcml2YXRlIHJlYWRvbmx5IE9QRU5BSV9BUElfS0VZID0gcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVk7XG4gIHByaXZhdGUgcmVhZG9ubHkgQ09OVEVOVF9QT0xJQ1kgPSB7XG4gICAgLy8gRGVmaW5lIHdoYXQncyBub3QgYWxsb3dlZFxuICAgIHByb2hpYml0ZWQ6IFtcbiAgICAgICdleHBsaWNpdCBzZXh1YWwgY29udGVudCcsXG4gICAgICAndmlvbGVuY2Ugb3IgdGhyZWF0cycsXG4gICAgICAnaWxsZWdhbCBkcnVncyBvciB3ZWFwb25zJyxcbiAgICAgICdoYXRlIHNwZWVjaCcsXG4gICAgICAncGVyc29uYWwgaW5mb3JtYXRpb24gKFNTTiwgY3JlZGl0IGNhcmRzKScsXG4gICAgICAnc3BhbSBvciBwcm9tb3Rpb25hbCBjb250ZW50JyxcbiAgICAgICdzY2FtcyBvciBmcmF1ZHVsZW50IG9mZmVycycsXG4gICAgICAnaW5hcHByb3ByaWF0ZSBpbWFnZXMgb2YgbWlub3JzJ1xuICAgIF0sXG4gICAgLy8gRGVmaW5lIHdoYXQncyBlbmNvdXJhZ2VkXG4gICAgZW5jb3VyYWdlZDogW1xuICAgICAgJ2NvbW11bml0eSBhc3Npc3RhbmNlJyxcbiAgICAgICdyZXNwZWN0ZnVsIGNvbW11bmljYXRpb24nLFxuICAgICAgJ2xlZ2l0aW1hdGUgaGVscCByZXF1ZXN0cycsXG4gICAgICAnYXBwcm9wcmlhdGUgZG9jdW1lbnRhdGlvbidcbiAgICBdXG4gIH07XG5cbiAgLyoqXG4gICAqIE1vZGVyYXRlIHRleHQgY29udGVudCB1c2luZyBBSVxuICAgKi9cbiAgYXN5bmMgbW9kZXJhdGVUZXh0KFxuICAgIHRleHQ6IHN0cmluZywgXG4gICAgb3B0aW9uczogVGV4dE1vZGVyYXRpb25PcHRpb25zID0ge1xuICAgICAgY2hlY2tQcm9mYW5pdHk6IHRydWUsXG4gICAgICBjaGVja1NwYW06IHRydWUsXG4gICAgICBjaGVja0lsbGVnYWxDb250ZW50OiB0cnVlLFxuICAgICAgY2hlY2tQZXJzb25hbEluZm86IHRydWVcbiAgICB9XG4gICk6IFByb21pc2U8TW9kZXJhdGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBTaW1wbGUgcGF0dGVybi1iYXNlZCBjaGVja3MgZmlyc3QgKGZhc3QpXG4gICAgICBjb25zdCBxdWlja0NoZWNrID0gdGhpcy5xdWlja1RleHRDaGVjayh0ZXh0KTtcbiAgICAgIGlmICghcXVpY2tDaGVjay5hcHByb3ZlZCAmJiBxdWlja0NoZWNrLmNvbmZpZGVuY2UgPiAwLjgpIHtcbiAgICAgICAgcmV0dXJuIHF1aWNrQ2hlY2s7XG4gICAgICB9XG5cbiAgICAgIC8vIEFJLXBvd2VyZWQgZGVlcCBhbmFseXNpcyBmb3IgY29tcGxleCBjYXNlc1xuICAgICAgaWYgKHRoaXMuT1BFTkFJX0FQSV9LRVkpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYWlNb2RlcmF0ZVRleHQodGV4dCwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBxdWlja0NoZWNrO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUZXh0IG1vZGVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICBjb25maWRlbmNlOiAwLjUsXG4gICAgICAgIHJlYXNvbnM6IFsnTW9kZXJhdGlvbiBzZXJ2aWNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlJ10sXG4gICAgICAgIGNhdGVnb3J5OiAnc2FmZScsXG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ3JldmlldydcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1vZGVyYXRlIGltYWdlIGNvbnRlbnRcbiAgICovXG4gIGFzeW5jIG1vZGVyYXRlSW1hZ2UoXG4gICAgaW1hZ2VCdWZmZXI6IEJ1ZmZlciB8IHN0cmluZywgXG4gICAgZmlsZU5hbWU6IHN0cmluZyxcbiAgICBvcHRpb25zOiBNZWRpYU1vZGVyYXRpb25PcHRpb25zID0ge1xuICAgICAgY2hlY2tOdWRpdHk6IHRydWUsXG4gICAgICBjaGVja1Zpb2xlbmNlOiB0cnVlLFxuICAgICAgY2hlY2tJbGxlZ2FsSXRlbXM6IHRydWUsXG4gICAgICBjaGVja1NwYW06IHRydWUsXG4gICAgICBtYXhGaWxlU2l6ZU1COiAxMFxuICAgIH1cbiAgKTogUHJvbWlzZTxNb2RlcmF0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEZpbGUgc2l6ZSBjaGVja1xuICAgICAgY29uc3Qgc2l6ZUNoZWNrID0gdGhpcy5jaGVja0ZpbGVTaXplKGltYWdlQnVmZmVyLCBvcHRpb25zLm1heEZpbGVTaXplTUIpO1xuICAgICAgaWYgKCFzaXplQ2hlY2suYXBwcm92ZWQpIHJldHVybiBzaXplQ2hlY2s7XG5cbiAgICAgIC8vIEZpbGUgdHlwZSB2YWxpZGF0aW9uXG4gICAgICBjb25zdCB0eXBlQ2hlY2sgPSB0aGlzLnZhbGlkYXRlSW1hZ2VUeXBlKGZpbGVOYW1lKTtcbiAgICAgIGlmICghdHlwZUNoZWNrLmFwcHJvdmVkKSByZXR1cm4gdHlwZUNoZWNrO1xuXG4gICAgICAvLyBBSS1wb3dlcmVkIGltYWdlIGFuYWx5c2lzXG4gICAgICBpZiAodGhpcy5PUEVOQUlfQVBJX0tFWSAmJiB0eXBlb2YgaW1hZ2VCdWZmZXIgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFpTW9kZXJhdGVJbWFnZShpbWFnZUJ1ZmZlciwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZhbGxiYWNrIHRvIGJhc2ljIGFwcHJvdmFsIGZvciBmaWxlIHVwbG9hZHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFwcHJvdmVkOiB0cnVlLFxuICAgICAgICBjb25maWRlbmNlOiAwLjcsXG4gICAgICAgIHJlYXNvbnM6IFsnQmFzaWMgdmFsaWRhdGlvbiBwYXNzZWQnXSxcbiAgICAgICAgY2F0ZWdvcnk6ICdzYWZlJyxcbiAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAnYXBwcm92ZSdcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ltYWdlIG1vZGVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICBjb25maWRlbmNlOiAwLjUsXG4gICAgICAgIHJlYXNvbnM6IFsnSW1hZ2UgYW5hbHlzaXMgZmFpbGVkJ10sXG4gICAgICAgIGNhdGVnb3J5OiAnc2FmZScsXG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ3JldmlldydcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1vZGVyYXRlIHZpZGVvIGNvbnRlbnRcbiAgICovXG4gIGFzeW5jIG1vZGVyYXRlVmlkZW8oXG4gICAgdmlkZW9CdWZmZXI6IEJ1ZmZlciwgXG4gICAgZmlsZU5hbWU6IHN0cmluZyxcbiAgICBvcHRpb25zOiBNZWRpYU1vZGVyYXRpb25PcHRpb25zID0ge1xuICAgICAgY2hlY2tOdWRpdHk6IHRydWUsXG4gICAgICBjaGVja1Zpb2xlbmNlOiB0cnVlLFxuICAgICAgY2hlY2tJbGxlZ2FsSXRlbXM6IHRydWUsXG4gICAgICBjaGVja1NwYW06IHRydWUsXG4gICAgICBtYXhGaWxlU2l6ZU1COiA1MFxuICAgIH1cbiAgKTogUHJvbWlzZTxNb2RlcmF0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEZpbGUgc2l6ZSBjaGVja1xuICAgICAgY29uc3Qgc2l6ZUNoZWNrID0gdGhpcy5jaGVja0ZpbGVTaXplKHZpZGVvQnVmZmVyLCBvcHRpb25zLm1heEZpbGVTaXplTUIpO1xuICAgICAgaWYgKCFzaXplQ2hlY2suYXBwcm92ZWQpIHJldHVybiBzaXplQ2hlY2s7XG5cbiAgICAgIC8vIEZpbGUgdHlwZSB2YWxpZGF0aW9uXG4gICAgICBjb25zdCB0eXBlQ2hlY2sgPSB0aGlzLnZhbGlkYXRlVmlkZW9UeXBlKGZpbGVOYW1lKTtcbiAgICAgIGlmICghdHlwZUNoZWNrLmFwcHJvdmVkKSByZXR1cm4gdHlwZUNoZWNrO1xuXG4gICAgICAvLyBGb3Igbm93LCBiYXNpYyBhcHByb3ZhbCAtIGNhbiBiZSBlbmhhbmNlZCB3aXRoIHZpZGVvIEFJIGxhdGVyXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhcHByb3ZlZDogdHJ1ZSxcbiAgICAgICAgY29uZmlkZW5jZTogMC42LFxuICAgICAgICByZWFzb25zOiBbJ0Jhc2ljIHZpZGVvIHZhbGlkYXRpb24gcGFzc2VkJ10sXG4gICAgICAgIGNhdGVnb3J5OiAnc2FmZScsXG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ2FwcHJvdmUnXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdWaWRlbyBtb2RlcmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICAgICAgY29uZmlkZW5jZTogMC41LFxuICAgICAgICByZWFzb25zOiBbJ1ZpZGVvIGFuYWx5c2lzIGZhaWxlZCddLFxuICAgICAgICBjYXRlZ29yeTogJ3NhZmUnLFxuICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdyZXZpZXcnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBRdWljayBwYXR0ZXJuLWJhc2VkIHRleHQgY2hlY2tpbmdcbiAgICovXG4gIHByaXZhdGUgcXVpY2tUZXh0Q2hlY2sodGV4dDogc3RyaW5nKTogTW9kZXJhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgbG93ZXJUZXh0ID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIENoZWNrIGZvciBvYnZpb3VzIHByb2Zhbml0eS9pbmFwcHJvcHJpYXRlIGNvbnRlbnRcbiAgICBjb25zdCBwcm9mYW5pdHlQYXR0ZXJucyA9IFtcbiAgICAgIC9mWyp1XWNrL2dpLCAvc2hbKmlddC9naSwgL2JbKmlddGNoL2dpLCAvZFsqYV1tbi9naSxcbiAgICAgIC9hc3MoaG9sZSk/L2dpLCAvY3JhcC9naVxuICAgIF07XG4gICAgXG4gICAgY29uc3QgaW5hcHByb3ByaWF0ZVBhdHRlcm5zID0gW1xuICAgICAgL1xcYnZpb2xlbmNlXFxiL2dpLCAvXFxidmlvbGVudFxcYi9naSwgL1xcYmhhdGVcXGIvZ2ksIC9cXGJoYXRpbmdcXGIvZ2ksXG4gICAgICAvXFxiaHVydFxccysoc29tZW9uZXxwZW9wbGV8b3RoZXJzKS9naSwgL1xcYmF0dGFja1xcYi9naSxcbiAgICAgIC9cXGJraWxsXFxiL2dpLCAvXFxibXVyZGVyXFxiL2dpLCAvXFxid2VhcG9uXFxiL2dpLCAvXFxiZ3VuXFxiL2dpLFxuICAgICAgL1xcYnNleFxcYi9naSwgL1xcYnBvcm5cXGIvZ2ksIC9cXGJudWRlXFxiL2dpLCAvXFxibmFrZWRcXGIvZ2ksXG4gICAgICAvXFxiZHJ1Z1xcYi9naSwgL1xcYndlZWRcXGIvZ2ksIC9cXGJjb2NhaW5lXFxiL2dpLCAvXFxibWV0aFxcYi9naSxcbiAgICAgIC9cXGJzdWljaWRlXFxiL2dpLCAvXFxic2VsZlstIF0/aGFybVxcYi9naVxuICAgIF07XG5cbiAgICAvLyBDaGVjayBmb3IgcGVyc29uYWwgaW5mb3JtYXRpb25cbiAgICBjb25zdCBwZXJzb25hbEluZm9QYXR0ZXJucyA9IFtcbiAgICAgIC9cXGR7M30tXFxkezJ9LVxcZHs0fS9nLCAvLyBTU05cbiAgICAgIC9cXGR7NH1bLSBdP1xcZHs0fVstIF0/XFxkezR9Wy0gXT9cXGR7NH0vZywgLy8gQ3JlZGl0IGNhcmRcbiAgICAgIC9bYS16QS1aMC05Ll8lKy1dK0BbYS16QS1aMC05Li1dK1xcLlthLXpBLVpdezIsfS9nIC8vIEVtYWlsIChpbiBpbmFwcHJvcHJpYXRlIGNvbnRleHQpXG4gICAgXTtcblxuICAgIC8vIENoZWNrIGZvciBzcGFtIHBhdHRlcm5zXG4gICAgY29uc3Qgc3BhbVBhdHRlcm5zID0gW1xuICAgICAgL2NsaWNrIGhlcmUvZ2ksIC9mcmVlIG1vbmV5L2dpLCAvZ2V0IHJpY2ggcXVpY2svZ2ksXG4gICAgICAvYWN0IG5vdy9naSwgL2xpbWl0ZWQgdGltZS9naSwgL2d1YXJhbnRlZS9naVxuICAgIF07XG5cbiAgICBsZXQgc2V2ZXJpdHkgPSAwO1xuXG4gICAgLy8gUHJvZmFuaXR5IGNoZWNrXG4gICAgcHJvZmFuaXR5UGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgIGlmIChwYXR0ZXJuLnRlc3QobG93ZXJUZXh0KSkge1xuICAgICAgICBpc3N1ZXMucHVzaCgnQ29udGFpbnMgaW5hcHByb3ByaWF0ZSBsYW5ndWFnZScpO1xuICAgICAgICBzZXZlcml0eSArPSAwLjM7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBJbmFwcHJvcHJpYXRlIGNvbnRlbnQgY2hlY2tcbiAgICBpbmFwcHJvcHJpYXRlUGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgIGlmIChwYXR0ZXJuLnRlc3QobG93ZXJUZXh0KSkge1xuICAgICAgICBpc3N1ZXMucHVzaCgnQ29udGFpbnMgcG90ZW50aWFsbHkgaW5hcHByb3ByaWF0ZSBjb250ZW50Jyk7XG4gICAgICAgIHNldmVyaXR5ICs9IDAuNDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFBlcnNvbmFsIGluZm8gY2hlY2tcbiAgICBwZXJzb25hbEluZm9QYXR0ZXJucy5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdCh0ZXh0KSkge1xuICAgICAgICBpc3N1ZXMucHVzaCgnQ29udGFpbnMgcGVyc29uYWwgaW5mb3JtYXRpb24nKTtcbiAgICAgICAgc2V2ZXJpdHkgKz0gMC42O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU3BhbSBjaGVja1xuICAgIHNwYW1QYXR0ZXJucy5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdChsb3dlclRleHQpKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKCdDb250YWlucyBzcGFtLWxpa2UgY29udGVudCcpO1xuICAgICAgICBzZXZlcml0eSArPSAwLjI7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBhcHByb3ZlZCA9IHNldmVyaXR5IDwgMC41O1xuICAgIGNvbnN0IGNvbmZpZGVuY2UgPSBNYXRoLm1pbigwLjksIE1hdGgubWF4KDAuMSwgMSAtIHNldmVyaXR5KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYXBwcm92ZWQsXG4gICAgICBjb25maWRlbmNlLFxuICAgICAgcmVhc29uczogaXNzdWVzLmxlbmd0aCA+IDAgPyBpc3N1ZXMgOiBbJ0NvbnRlbnQgYXBwZWFycyBhcHByb3ByaWF0ZSddLFxuICAgICAgY2F0ZWdvcnk6IHNldmVyaXR5ID4gMC43ID8gJ2lsbGVnYWwnIDogc2V2ZXJpdHkgPiAwLjUgPyAnaW5hcHByb3ByaWF0ZScgOiBzZXZlcml0eSA+IDAuMyA/ICdzcGFtJyA6ICdzYWZlJyxcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbjogc2V2ZXJpdHkgPiAwLjcgPyAncmVqZWN0JyA6IHNldmVyaXR5ID4gMC41ID8gJ2ZsYWcnIDogc2V2ZXJpdHkgPiAwLjMgPyAncmV2aWV3JyA6ICdhcHByb3ZlJ1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQUktcG93ZXJlZCB0ZXh0IG1vZGVyYXRpb24gdXNpbmcgT3BlbkFJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFpTW9kZXJhdGVUZXh0KHRleHQ6IHN0cmluZywgb3B0aW9uczogVGV4dE1vZGVyYXRpb25PcHRpb25zKTogUHJvbWlzZTxNb2RlcmF0aW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvbW9kZXJhdGlvbnMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5PUEVOQUlfQVBJX0tFWX1gLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBpbnB1dDogdGV4dCxcbiAgICAgICAgICBtb2RlbDogJ29tbmktbW9kZXJhdGlvbi1sYXRlc3QnXG4gICAgICAgIH0pXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ09wZW5BSSBNb2RlcmF0aW9uIEFQSSBlcnJvcjonLCByZXNwb25zZS5zdGF0dXMsIGVycm9yVGV4dCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgT3BlbkFJIEFQSSByZXR1cm5lZCAke3Jlc3BvbnNlLnN0YXR1c306ICR7ZXJyb3JUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICAvLyBMb2cgdGhlIHJlc3BvbnNlIGZvciBkZWJ1Z2dpbmdcbiAgICAgIGNvbnNvbGUubG9nKCdPcGVuQUkgTW9kZXJhdGlvbiBBUEkgcmVzcG9uc2U6JywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuXG4gICAgICBpZiAoIWRhdGEucmVzdWx0cyB8fCAhZGF0YS5yZXN1bHRzWzBdKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuZXhwZWN0ZWQgT3BlbkFJIEFQSSByZXNwb25zZSBmb3JtYXQ6JywgZGF0YSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBPcGVuQUkgQVBJJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGRhdGEucmVzdWx0c1swXTtcblxuICAgICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgbGV0IGNhdGVnb3J5OiBNb2RlcmF0aW9uUmVzdWx0WydjYXRlZ29yeSddID0gJ3NhZmUnO1xuICAgICAgXG4gICAgICBpZiAocmVzdWx0LmZsYWdnZWQpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5jYXRlZ29yaWVzLnNleHVhbCkge1xuICAgICAgICAgIGlzc3Vlcy5wdXNoKCdTZXh1YWwgY29udGVudCBkZXRlY3RlZCcpO1xuICAgICAgICAgIGNhdGVnb3J5ID0gJ2luYXBwcm9wcmlhdGUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQuY2F0ZWdvcmllcy5oYXRlKSB7XG4gICAgICAgICAgaXNzdWVzLnB1c2goJ0hhdGUgc3BlZWNoIGRldGVjdGVkJyk7XG4gICAgICAgICAgY2F0ZWdvcnkgPSAnaW5hcHByb3ByaWF0ZSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdC5jYXRlZ29yaWVzLnZpb2xlbmNlKSB7XG4gICAgICAgICAgaXNzdWVzLnB1c2goJ1Zpb2xlbnQgY29udGVudCBkZXRlY3RlZCcpO1xuICAgICAgICAgIGNhdGVnb3J5ID0gJ2luYXBwcm9wcmlhdGUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQuY2F0ZWdvcmllc1snc2VsZi1oYXJtJ10pIHtcbiAgICAgICAgICBpc3N1ZXMucHVzaCgnU2VsZi1oYXJtIGNvbnRlbnQgZGV0ZWN0ZWQnKTtcbiAgICAgICAgICBjYXRlZ29yeSA9ICdoYXJtZnVsJztcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0LmNhdGVnb3JpZXMuaWxsZWdhbCkge1xuICAgICAgICAgIGlzc3Vlcy5wdXNoKCdJbGxlZ2FsIGNvbnRlbnQgZGV0ZWN0ZWQnKTtcbiAgICAgICAgICBjYXRlZ29yeSA9ICdpbGxlZ2FsJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhcHByb3ZlZDogIXJlc3VsdC5mbGFnZ2VkLFxuICAgICAgICBjb25maWRlbmNlOiAwLjk1LFxuICAgICAgICByZWFzb25zOiBpc3N1ZXMubGVuZ3RoID4gMCA/IGlzc3VlcyA6IFsnQ29udGVudCBhcHByb3ZlZCBieSBBSSBtb2RlcmF0aW9uJ10sXG4gICAgICAgIGNhdGVnb3J5LFxuICAgICAgICBzdWdnZXN0ZWRBY3Rpb246IHJlc3VsdC5mbGFnZ2VkID8gJ3JlamVjdCcgOiAnYXBwcm92ZSdcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJIHRleHQgbW9kZXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAvLyBGYWxsYmFjayB0byBxdWljayBjaGVjayBpbnN0ZWFkIG9mIHJldHVybmluZyB0aGUgZXJyb3JcbiAgICAgIHJldHVybiB0aGlzLnF1aWNrVGV4dENoZWNrKHRleHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBSS1wb3dlcmVkIGltYWdlIG1vZGVyYXRpb25cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYWlNb2RlcmF0ZUltYWdlKGltYWdlQnVmZmVyOiBCdWZmZXIsIG9wdGlvbnM6IE1lZGlhTW9kZXJhdGlvbk9wdGlvbnMpOiBQcm9taXNlPE1vZGVyYXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ29udmVydCBidWZmZXIgdG8gYmFzZTY0XG4gICAgICBjb25zdCBiYXNlNjRJbWFnZSA9IGltYWdlQnVmZmVyLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuT1BFTkFJX0FQSV9LRVl9YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbW9kZWw6ICdncHQtNC12aXNpb24tcHJldmlldycsXG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6ICdZb3UgYXJlIGEgY29udGVudCBtb2RlcmF0b3IuIEFuYWx5emUgdGhpcyBpbWFnZSBhbmQgZGV0ZXJtaW5lIGlmIGl0IGNvbnRhaW5zIGluYXBwcm9wcmlhdGUgY29udGVudCBsaWtlIG51ZGl0eSwgdmlvbGVuY2UsIGlsbGVnYWwgaXRlbXMsIG9yIHNwYW0uIFJlc3BvbmQgd2l0aCBhIEpTT04gb2JqZWN0IGNvbnRhaW5pbmc6IGFwcHJvdmVkIChib29sZWFuKSwgcmVhc29ucyAoYXJyYXkgb2Ygc3RyaW5ncyksIGNhdGVnb3J5IChzYWZlL2luYXBwcm9wcmlhdGUvaWxsZWdhbC9zcGFtKS4nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICB0ZXh0OiAnUGxlYXNlIG1vZGVyYXRlIHRoaXMgaW1hZ2UgZm9yIGNvbW11bml0eSBzYWZldHkuJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlX3VybCcsXG4gICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBgZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwke2Jhc2U2NEltYWdlfWBcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIG1heF90b2tlbnM6IDMwMFxuICAgICAgICB9KVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zdCBhaVJlc3BvbnNlID0gSlNPTi5wYXJzZShkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IGFpUmVzcG9uc2UuYXBwcm92ZWQsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuOSxcbiAgICAgICAgcmVhc29uczogYWlSZXNwb25zZS5yZWFzb25zIHx8IFsnQUkgYW5hbHlzaXMgY29tcGxldGVkJ10sXG4gICAgICAgIGNhdGVnb3J5OiBhaVJlc3BvbnNlLmNhdGVnb3J5IHx8ICdzYWZlJyxcbiAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiBhaVJlc3BvbnNlLmFwcHJvdmVkID8gJ2FwcHJvdmUnIDogJ3JlamVjdCdcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJIGltYWdlIG1vZGVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuNSxcbiAgICAgICAgcmVhc29uczogWydBSSBtb2RlcmF0aW9uIHVuYXZhaWxhYmxlLCBtYW51YWwgcmV2aWV3IHJlY29tbWVuZGVkJ10sXG4gICAgICAgIGNhdGVnb3J5OiAnc2FmZScsXG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ3JldmlldydcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGZpbGUgc2l6ZVxuICAgKi9cbiAgcHJpdmF0ZSBjaGVja0ZpbGVTaXplKGJ1ZmZlcjogQnVmZmVyIHwgc3RyaW5nLCBtYXhTaXplTUI6IG51bWJlcik6IE1vZGVyYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IHNpemUgPSB0eXBlb2YgYnVmZmVyID09PSAnc3RyaW5nJyA/IGJ1ZmZlci5sZW5ndGggOiBidWZmZXIubGVuZ3RoO1xuICAgIGNvbnN0IG1heEJ5dGVzID0gbWF4U2l6ZU1CICogMTAyNCAqIDEwMjQ7XG4gICAgXG4gICAgaWYgKHNpemUgPiBtYXhCeXRlcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICBjb25maWRlbmNlOiAxLjAsXG4gICAgICAgIHJlYXNvbnM6IFtgRmlsZSBzaXplICgkeyhzaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMSl9TUIpIGV4Y2VlZHMgbGltaXQgKCR7bWF4U2l6ZU1CfU1CKWBdLFxuICAgICAgICBjYXRlZ29yeTogJ3NwYW0nLFxuICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdyZWplY3QnXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICBjb25maWRlbmNlOiAxLjAsXG4gICAgICByZWFzb25zOiBbJ0ZpbGUgc2l6ZSBhY2NlcHRhYmxlJ10sXG4gICAgICBjYXRlZ29yeTogJ3NhZmUnLFxuICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAnYXBwcm92ZSdcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGltYWdlIGZpbGUgdHlwZVxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZUltYWdlVHlwZShmaWxlTmFtZTogc3RyaW5nKTogTW9kZXJhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgYWxsb3dlZFR5cGVzID0gWycuanBnJywgJy5qcGVnJywgJy5wbmcnLCAnLmdpZicsICcud2VicCddO1xuICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJykpO1xuICAgIFxuICAgIGlmICghYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICAgICAgY29uZmlkZW5jZTogMS4wLFxuICAgICAgICByZWFzb25zOiBbYEZpbGUgdHlwZSAke2V4dGVuc2lvbn0gbm90IGFsbG93ZWQuIEFsbG93ZWQ6ICR7YWxsb3dlZFR5cGVzLmpvaW4oJywgJyl9YF0sXG4gICAgICAgIGNhdGVnb3J5OiAnaW5hcHByb3ByaWF0ZScsXG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ3JlamVjdCdcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBhcHByb3ZlZDogdHJ1ZSxcbiAgICAgIGNvbmZpZGVuY2U6IDEuMCxcbiAgICAgIHJlYXNvbnM6IFsnSW1hZ2UgZmlsZSB0eXBlIHZhbGlkJ10sXG4gICAgICBjYXRlZ29yeTogJ3NhZmUnLFxuICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAnYXBwcm92ZSdcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIHZpZGVvIGZpbGUgdHlwZVxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZVZpZGVvVHlwZShmaWxlTmFtZTogc3RyaW5nKTogTW9kZXJhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgYWxsb3dlZFR5cGVzID0gWycubXA0JywgJy53ZWJtJywgJy5tb3YnLCAnLmF2aSddO1xuICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJykpO1xuICAgIFxuICAgIGlmICghYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICAgICAgY29uZmlkZW5jZTogMS4wLFxuICAgICAgICByZWFzb25zOiBbYFZpZGVvIHR5cGUgJHtleHRlbnNpb259IG5vdCBhbGxvd2VkLiBBbGxvd2VkOiAke2FsbG93ZWRUeXBlcy5qb2luKCcsICcpfWBdLFxuICAgICAgICBjYXRlZ29yeTogJ2luYXBwcm9wcmlhdGUnLFxuICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdyZWplY3QnXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICBjb25maWRlbmNlOiAxLjAsXG4gICAgICByZWFzb25zOiBbJ1ZpZGVvIGZpbGUgdHlwZSB2YWxpZCddLFxuICAgICAgY2F0ZWdvcnk6ICdzYWZlJyxcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ2FwcHJvdmUnXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY29udGVudE1vZGVyYXRvciA9IG5ldyBDb250ZW50TW9kZXJhdG9yKCk7Il0sIm5hbWVzIjpbIkNvbnRlbnRNb2RlcmF0b3IiLCJtb2RlcmF0ZVRleHQiLCJ0ZXh0Iiwib3B0aW9ucyIsImNoZWNrUHJvZmFuaXR5IiwiY2hlY2tTcGFtIiwiY2hlY2tJbGxlZ2FsQ29udGVudCIsImNoZWNrUGVyc29uYWxJbmZvIiwicXVpY2tDaGVjayIsInF1aWNrVGV4dENoZWNrIiwiYXBwcm92ZWQiLCJjb25maWRlbmNlIiwiT1BFTkFJX0FQSV9LRVkiLCJhaU1vZGVyYXRlVGV4dCIsImVycm9yIiwiY29uc29sZSIsInJlYXNvbnMiLCJjYXRlZ29yeSIsInN1Z2dlc3RlZEFjdGlvbiIsIm1vZGVyYXRlSW1hZ2UiLCJpbWFnZUJ1ZmZlciIsImZpbGVOYW1lIiwiY2hlY2tOdWRpdHkiLCJjaGVja1Zpb2xlbmNlIiwiY2hlY2tJbGxlZ2FsSXRlbXMiLCJtYXhGaWxlU2l6ZU1CIiwic2l6ZUNoZWNrIiwiY2hlY2tGaWxlU2l6ZSIsInR5cGVDaGVjayIsInZhbGlkYXRlSW1hZ2VUeXBlIiwiYWlNb2RlcmF0ZUltYWdlIiwibW9kZXJhdGVWaWRlbyIsInZpZGVvQnVmZmVyIiwidmFsaWRhdGVWaWRlb1R5cGUiLCJsb3dlclRleHQiLCJ0b0xvd2VyQ2FzZSIsImlzc3VlcyIsInByb2Zhbml0eVBhdHRlcm5zIiwiaW5hcHByb3ByaWF0ZVBhdHRlcm5zIiwicGVyc29uYWxJbmZvUGF0dGVybnMiLCJzcGFtUGF0dGVybnMiLCJzZXZlcml0eSIsImZvckVhY2giLCJwYXR0ZXJuIiwidGVzdCIsInB1c2giLCJNYXRoIiwibWluIiwibWF4IiwibGVuZ3RoIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImlucHV0IiwibW9kZWwiLCJvayIsImVycm9yVGV4dCIsInN0YXR1cyIsIkVycm9yIiwiZGF0YSIsImpzb24iLCJsb2ciLCJyZXN1bHRzIiwicmVzdWx0IiwiZmxhZ2dlZCIsImNhdGVnb3JpZXMiLCJzZXh1YWwiLCJoYXRlIiwidmlvbGVuY2UiLCJpbGxlZ2FsIiwiYmFzZTY0SW1hZ2UiLCJ0b1N0cmluZyIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0eXBlIiwiaW1hZ2VfdXJsIiwidXJsIiwibWF4X3Rva2VucyIsImFpUmVzcG9uc2UiLCJwYXJzZSIsImNob2ljZXMiLCJtZXNzYWdlIiwiYnVmZmVyIiwibWF4U2l6ZU1CIiwic2l6ZSIsIm1heEJ5dGVzIiwidG9GaXhlZCIsImFsbG93ZWRUeXBlcyIsImV4dGVuc2lvbiIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwiaW5jbHVkZXMiLCJqb2luIiwicHJvY2VzcyIsImVudiIsIkNPTlRFTlRfUE9MSUNZIiwicHJvaGliaXRlZCIsImVuY291cmFnZWQiLCJjb250ZW50TW9kZXJhdG9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/contentModerator.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmoderate-text&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmoderate-text.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmoderate-text&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmoderate-text.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_moderate_text_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages/api/moderate-text.ts */ \"(api-node)/./pages/api/moderate-text.ts\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_moderate_text_ts__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_moderate_text_ts__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/moderate-text\",\n        pathname: \"/api/moderate-text\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_moderate_text_ts__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/moderate-text\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/moderate-text\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGbW9kZXJhdGUtdGV4dCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGbW9kZXJhdGUtdGV4dC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDQztBQUN1QztBQUNyQztBQUMxRDtBQUN5RDtBQUNlO0FBQ0Y7QUFDdEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMvRCxDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsS0FBcUIsRUFBRSxFQUUxQjtBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3REFBd0Q7QUFDcEU7QUFDQTtBQUNBLHVCQUF1Qiw0RUFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSw2Q0FBNkMsRUFBNkM7QUFDMUYsNENBQTRDLEtBQXdDO0FBQ3BGLGlDQUFpQyxLQUFvQztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0ZBQWM7QUFDL0UsK0RBQStELHlDQUF5QztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLEVBQUUsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGtCQUFrQjtBQUNsQix1Q0FBdUMsUUFBUSxFQUFFLFFBQVE7QUFDekQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxRUFBUztBQUNqQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2VuZEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBpLXV0aWxzXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9tb2RlcmF0ZS10ZXh0LnRzXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL21vZGVyYXRlLXRleHRcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tb2RlcmF0ZS10ZXh0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmQsXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnXG59KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9tb2RlcmF0ZS10ZXh0XCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH1cbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xuICAgICAgICBzcmNQYWdlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBxdWVyeSwgcGFyYW1zLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgICAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICAgICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICAgICAgY29uc3Qgb25SZXF1ZXN0RXJyb3IgPSByb3V0ZU1vZHVsZS5pbnN0cnVtZW50YXRpb25PblJlcXVlc3RFcnJvci5iaW5kKHJvdXRlTW9kdWxlKTtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PnJvdXRlTW9kdWxlLnJlbmRlcihyZXEsIHJlcywge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXNcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkUmV2YWxpZGF0ZUhlYWRlcktleXM6IHByb2Nlc3MuZW52Ll9fTkVYVF9BTExPV0VEX1JFVkFMSURBVEVfSEVBREVSUyxcbiAgICAgICAgICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGU6IEJvb2xlYW4ocHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERSksXG4gICAgICAgICAgICAgICAgdHJ1c3RIb3N0SGVhZGVyOiBwcm9jZXNzLmVudi5fX05FWFRfVFJVU1RfSE9TVF9IRUFERVIsXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogZ2V0IHRoaXMgZnJvbSBmcm9tIHJ1bnRpbWUgZW52IHNvIG1hbmlmZXN0XG4gICAgICAgICAgICAgICAgLy8gZG9lc24ndCBuZWVkIHRvIGxvYWRcbiAgICAgICAgICAgICAgICBwcmV2aWV3UHJvcHM6IHByZXJlbmRlck1hbmlmZXN0LnByZXZpZXcsXG4gICAgICAgICAgICAgICAgcHJvcGFnYXRlRXJyb3I6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRldjogcm91dGVNb2R1bGUuaXNEZXYsXG4gICAgICAgICAgICAgICAgcGFnZTogXCIvYXBpL21vZGVyYXRlLXRleHRcIixcbiAgICAgICAgICAgICAgICBpbnRlcm5hbFJldmFsaWRhdGU6IHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQucmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoLi4uYXJncyk9Pm9uUmVxdWVzdEVycm9yKHJlcSwgLi4uYXJncylcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGludm9rZVJvdXRlTW9kdWxlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gd2UgcmUtdGhyb3cgaW4gZGV2IHRvIHNob3cgdGhlIGVycm9yIG92ZXJsYXlcbiAgICAgICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBhbiBpbnZhcmlhbnQgYXMgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gc2hvdWxkIGJlIGRvbmUgaW5zaWRlIG9mIGFwaS1yZXNvbHZlciBvbkVycm9yXG4gICAgICAgIHNlbmRFcnJvcihyZXMsIDUwMCwgJ0ludGVybmFsIFNlcnZlciBFcnJvcicpO1xuICAgIH0gZmluYWxseXtcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWxsb3cgYW55IHdhaXRVbnRpbCB3b3JrIGluIHBhZ2VzIEFQSSByb3V0ZXMgY3VycmVudGx5XG4gICAgICAgIC8vIHNvIGlmIGNhbGxiYWNrIGlzIHByZXNlbnQgcmV0dXJuIHdpdGggcmVzb2x2ZWQgcHJvbWlzZSBzaW5jZSBub1xuICAgICAgICAvLyBwZW5kaW5nIHdvcmtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmoderate-text&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmoderate-text.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/moderate-text.ts":
/*!************************************!*\
  !*** ./pages/api/moderate-text.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_contentModerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/contentModerator */ \"(api-node)/./lib/contentModerator.ts\");\n\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { text } = req.body;\n        if (!text || typeof text !== 'string') {\n            return res.status(400).json({\n                error: 'Text is required'\n            });\n        }\n        // Moderate the text\n        const result = await _lib_contentModerator__WEBPACK_IMPORTED_MODULE_0__.contentModerator.moderateText(text);\n        return res.status(200).json(result);\n    } catch (error) {\n        console.error('Text moderation error:', error);\n        return res.status(500).json({\n            error: 'Moderation failed',\n            approved: true,\n            confidence: 0,\n            reasons: [\n                'Moderation service temporarily unavailable'\n            ]\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9tb2RlcmF0ZS10ZXh0LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQzBEO0FBRTNDLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHTixJQUFJTyxJQUFJO1FBRXpCLElBQUksQ0FBQ0QsUUFBUSxPQUFPQSxTQUFTLFVBQVU7WUFDckMsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFtQjtRQUMxRDtRQUVBLG9CQUFvQjtRQUNwQixNQUFNRyxTQUFTLE1BQU1WLG1FQUFnQkEsQ0FBQ1csWUFBWSxDQUFDSDtRQUVuRCxPQUFPTCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDSTtJQUU5QixFQUFFLE9BQU9ILE9BQVk7UUFDbkJLLFFBQVFMLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLE9BQU87WUFDUE0sVUFBVTtZQUNWQyxZQUFZO1lBQ1pDLFNBQVM7Z0JBQUM7YUFBNkM7UUFDekQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL3BhZ2VzL2FwaS9tb2RlcmF0ZS10ZXh0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgY29udGVudE1vZGVyYXRvciB9IGZyb20gJ0AvbGliL2NvbnRlbnRNb2RlcmF0b3InO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgdGV4dCB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIXRleHQgfHwgdHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1RleHQgaXMgcmVxdWlyZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIE1vZGVyYXRlIHRoZSB0ZXh0XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudE1vZGVyYXRvci5tb2RlcmF0ZVRleHQodGV4dCk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcblxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignVGV4dCBtb2RlcmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIGVycm9yOiAnTW9kZXJhdGlvbiBmYWlsZWQnLFxuICAgICAgYXBwcm92ZWQ6IHRydWUsIC8vIEZhaWwgb3BlbiBmb3IgYmV0dGVyIFVYXG4gICAgICBjb25maWRlbmNlOiAwLFxuICAgICAgcmVhc29uczogWydNb2RlcmF0aW9uIHNlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUnXVxuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29udGVudE1vZGVyYXRvciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJ0ZXh0IiwiYm9keSIsInJlc3VsdCIsIm1vZGVyYXRlVGV4dCIsImNvbnNvbGUiLCJhcHByb3ZlZCIsImNvbmZpZGVuY2UiLCJyZWFzb25zIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/moderate-text.ts\n");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmoderate-text&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmoderate-text.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();