(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{3602:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var l=n(7876),i=n(4232),a=n(8230),s=n.n(a),d=n(9099),c=n(7137);function o(){var e,t,n,a,o;let r=(0,d.useRouter)(),{id:u}=r.query,[h,p]=(0,i.useState)(null),[g,y]=(0,i.useState)(!0),[x,m]=(0,i.useState)(!1),[j,b]=(0,i.useState)(!1),[v,f]=(0,i.useState)(null);async function _(e){if(e.preventDefault(),!h)return;m(!0),f(null);let{error:t}=await c.N.from("needs").update({title:h.title,city:h.city,category:h.category,description:h.description,contact_email:h.contact_email||null,contact_phone_e164:h.contact_phone_e164||null}).eq("id",h.id);if(m(!1),t)return void f(t.message);r.push("/needs/".concat(h.id))}async function w(){if(!h||!confirm("Are you sure you want to delete this need?"))return;b(!0);let{error:e}=await c.N.from("needs").delete().eq("id",h.id);if(b(!1),e)return void f(e.message);r.push("/needs")}return((0,i.useEffect)(()=>{u&&(async()=>{let{data:e,error:t}=await c.N.from("needs").select("*").eq("id",u).single();t?f(t.message):p(e),y(!1)})()},[u]),g)?(0,l.jsx)("main",{style:{padding:24},children:"Loading…"}):h?(0,l.jsxs)("main",{style:{padding:24,maxWidth:720},children:[(0,l.jsx)("h1",{children:"Edit need"}),(0,l.jsx)("p",{children:(0,l.jsx)(s(),{href:"/needs/".concat(h.id),children:"← Back to need"})}),v&&(0,l.jsx)("p",{style:{color:"crimson"},children:v}),(0,l.jsxs)("form",{onSubmit:_,children:[(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("label",{children:(0,l.jsx)("b",{children:"Title"})}),(0,l.jsx)("input",{value:h.title,onChange:e=>p({...h,title:e.target.value}),style:{display:"block",width:"100%",padding:8}})]}),(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("label",{children:(0,l.jsx)("b",{children:"City"})}),(0,l.jsx)("input",{value:null!=(e=h.city)?e:"",onChange:e=>p({...h,city:e.target.value}),style:{display:"block",width:"100%",padding:8}})]}),(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("label",{children:(0,l.jsx)("b",{children:"Category"})}),(0,l.jsx)("input",{value:null!=(t=h.category)?t:"",onChange:e=>p({...h,category:e.target.value}),style:{display:"block",width:"100%",padding:8}})]}),(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("label",{children:(0,l.jsx)("b",{children:"Description"})}),(0,l.jsx)("textarea",{value:null!=(n=h.description)?n:"",onChange:e=>p({...h,description:e.target.value}),rows:4,style:{display:"block",width:"100%",padding:8}})]}),(0,l.jsxs)("fieldset",{style:{marginBottom:16},children:[(0,l.jsx)("legend",{children:(0,l.jsx)("b",{children:"Contact Info (optional)"})}),(0,l.jsxs)("div",{style:{marginBottom:8},children:[(0,l.jsx)("label",{children:"Contact email"}),(0,l.jsx)("input",{type:"email",value:null!=(a=h.contact_email)?a:"",onChange:e=>p({...h,contact_email:e.target.value}),style:{display:"block",width:"100%",padding:8},placeholder:"you@example.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Contact phone (E.164)"}),(0,l.jsx)("input",{value:null!=(o=h.contact_phone_e164)?o:"",onChange:e=>p({...h,contact_phone_e164:e.target.value}),style:{display:"block",width:"100%",padding:8},placeholder:"+19195551234"})]})]}),(0,l.jsx)("button",{type:"submit",disabled:x,children:x?"Saving…":"Save changes"}),(0,l.jsx)("button",{type:"button",onClick:w,disabled:j,style:{marginLeft:8},children:j?"Deleting…":"Delete"})]})]}):(0,l.jsx)("main",{style:{padding:24},children:"Need not found."})}},6316:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/needs/[id]/edit",function(){return n(3602)}])},7137:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var l=n(8100);n(5364);let i=(0,l.createPagesBrowserClient)()}},e=>{e.O(0,[636,593,792],()=>e(e.s=6316)),_N_E=e.O()}]);