(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{2110:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(7876),n=r(7328),l=r.n(n),s=r(8230),i=r.n(s),d=r(4232),o=r(9099),u=r(9367);function c(){let e=(0,u.useSupabaseClient)(),t=(0,u.useUser)(),r=(0,o.useRouter)(),[n,s]=(0,d.useState)(""),[c,x]=(0,d.useState)(""),[p,h]=(0,d.useState)(""),[g,m]=(0,d.useState)(""),[f,b]=(0,d.useState)(""),[v,N]=(0,d.useState)(null),[w,j]=(0,d.useState)(!1);async function y(){var a,l;if(N(null),!n.trim())return void N("Please enter a title.");try{j(!0);let{error:l}=await e.from("needs").insert({title:n.trim(),description:c.trim()||null,city:p.trim()||null,state:g.trim()||null,category:f.trim()||null,owner_id:null!=(a=null==t?void 0:t.id)?a:null});if(l)throw l;r.replace("/dashboard")}catch(e){N(null!=(l=null==e?void 0:e.message)?l:"Failed to create need")}finally{j(!1)}}return(0,d.useEffect)(()=>{(async()=>{let{data:t}=await e.auth.getUser();t.user||r.replace("/login?next=".concat(encodeURIComponent("/needs/create")))})()},[r,e]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"Create Need — 4MK"})}),(0,a.jsx)("div",{className:"min-h-screen bg-[#373737] py-8 px-3",children:(0,a.jsxs)("div",{className:"mx-auto max-w-3xl rounded-[28px] bg-gradient-to-b from-pink-200 to-pink-300 p-6 md:p-10 shadow-[0_22px_70px_rgba(0,0,0,0.45)] ring-2 ring-[#E3B341]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-extrabold text-neutral-900",children:"Create Need"}),(0,a.jsx)(i(),{href:"/",className:"text-sm underline text-neutral-800",children:"← Back to Home"})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-3",children:[(0,a.jsx)("input",{className:"rounded-xl bg-white/95 border border-neutral-300 px-4 py-2 text-[15px] outline-none focus:ring-2 focus:ring-emerald-600",placeholder:"Title",value:n,onChange:e=>s(e.target.value)}),(0,a.jsx)("textarea",{className:"rounded-xl bg-white/95 border border-neutral-300 px-4 py-2 text-[15px] outline-none focus:ring-2 focus:ring-emerald-600 min-h-[120px]",placeholder:"Description",value:c,onChange:e=>x(e.target.value)}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsx)("input",{className:"rounded-xl bg-white/95 border border-neutral-300 px-4 py-2 text-[15px] outline-none focus:ring-2 focus:ring-emerald-600",placeholder:"City",value:p,onChange:e=>h(e.target.value)}),(0,a.jsx)("input",{className:"rounded-xl bg-white/95 border border-neutral-300 px-4 py-2 text-[15px] outline-none focus:ring-2 focus:ring-emerald-600",placeholder:"State",value:g,onChange:e=>m(e.target.value)})]}),(0,a.jsx)("input",{className:"rounded-xl bg-white/95 border border-neutral-300 px-4 py-2 text-[15px] outline-none focus:ring-2 focus:ring-emerald-600",placeholder:"Category (optional)",value:f,onChange:e=>b(e.target.value)}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)("button",{onClick:y,disabled:w,className:"rounded-full bg-emerald-700 text-white px-5 py-2 shadow hover:opacity-90 disabled:opacity-50",children:w?"Saving…":"Create Need"}),(0,a.jsx)(i(),{href:"/",className:"rounded-full bg-neutral-900 text-white px-5 py-2 shadow hover:opacity-90",children:"Cancel"})]}),v&&(0,a.jsx)("div",{className:"text-sm text-red-700",children:v})]})]})})]})}},7308:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/needs/create",function(){return r(2110)}])},7328:(e,t,r)=>{e.exports=r(9269)}},e=>{e.O(0,[636,593,792],()=>e(e.s=7308)),_N_E=e.O()}]);